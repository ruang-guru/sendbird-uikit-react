{"version":3,"file":"index-6c798e37.js","sources":["../../../src/lib/UserProfileContext.jsx","../../../src/rogu/utils/assignmentMaterial.ts","../../../src/utils/index.ts","../../../src/ui/IconButton/index.jsx","../../../src/hooks/useModal/ModalRoot/index.jsx","../../../src/ui/Button/type.js","../../../src/ui/Button/utils.js","../../../src/ui/Button/index.jsx","../../../src/ui/Modal/index.jsx","../../../src/utils/color.js","../../../src/ui/TextButton/index.jsx","../../../src/lib/pubSub/topics.js","../../../src/lib/selectors.js","../../../src/ui/UserProfile/index.tsx","../../../src/ui/ContextMenu/items/MenuItems.jsx","../../../src/ui/SortByRow/index.jsx","../../../src/ui/ContextMenu/items/EmojiListItems.jsx","../../../src/ui/ContextMenu/index.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * user profile goes deep inside the component tree\n * use this context as a short circuit to send in values\n */\nconst UserProfileContext = React.createContext({\n  disableUserProfile: true,\n  isOpenChannel: false,\n  renderUserProfile: null,\n});\n\nconst UserProfileProvider = (props) => {\n  const { children, className } = props;\n  return (\n    <UserProfileContext.Provider value={props}>\n      <div className={className}>\n        {children}\n      </div>\n    </UserProfileContext.Provider>\n  );\n};\n\nUserProfileProvider.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n    PropTypes.any,\n  ]).isRequired,\n  // eslint-disable-next-line react/no-unused-prop-types\n  isOpenChannel: PropTypes.bool,\n  // eslint-disable-next-line react/no-unused-prop-types\n  disableUserProfile: PropTypes.bool,\n  // eslint-disable-next-line react/no-unused-prop-types\n  renderUserProfile: PropTypes.func,\n  className: PropTypes.string,\n};\n\nUserProfileProvider.defaultProps = {\n  className: null,\n  isOpenChannel: false,\n  disableUserProfile: false,\n  renderUserProfile: null,\n};\n\nexport { UserProfileContext, UserProfileProvider };\n","export const isAssignmentMessage = (customType: string): boolean =>\n  customType === \"assignment\";\n\nexport const isMaterialMessage = (customType: string): boolean =>\n  customType === \"material\";\n\nexport const convertCtaLinkToWebLink = (\n  cta: string,\n  customType: string\n): string => {\n  const listOfSerials = cta.split(\"&\");\n  const workspaceSerial = listOfSerials[1].split(\"=\")[1];\n  const classroomSerial = listOfSerials[2].split(\"=\")[1];\n  const serial = listOfSerials[3].split(\"=\")[1];\n  const type_ = customType === \"assignment\" ? \"assignment\" : \"material\";\n  const url = `https://kelas.ruangguru.com/workspace/${workspaceSerial}/classroom/${classroomSerial}/${type_}/detail/${serial}`;\n\n  return url;\n};\n\nexport const convertAssignmentDueUTCtoLocale = (dueAt: string): string => {\n  const localeDate = new Date(dueAt).toLocaleString();\n  return localeDate;\n};\n","import format from \"date-fns/format\";\nimport {\n  AdminMessage,\n  Emoji,\n  EmojiCategory,\n  EmojiContainer,\n  FileMessage,\n  GroupChannel,\n  GroupChannelListQuery,\n  Member,\n  MessageListParams,\n  OpenChannel,\n  Reaction,\n  SendBirdInstance,\n  User,\n  UserMessage,\n} from \"sendbird\";\nimport { isAssignmentMessage, isMaterialMessage } from '../rogu/utils';\n\n// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types\nconst SUPPORTED_MIMES = {\n  IMAGE: [\n    \"image/jpeg\",\n    \"image/jpg\",\n    \"image/png\",\n    \"image/gif\",\n    \"image/svg+xml\",\n    \"image/webp\", // not supported in IE\n  ],\n  VIDEO: [\"video/mpeg\", \"video/ogg\", \"video/webm\", \"video/mp4\"],\n  AUDIO: [\n    \"audio/aac\",\n    \"audio/midi\",\n    \"audio/x-midi\",\n    \"audio/mpeg\",\n    \"audio/ogg\",\n    \"audio/opus\",\n    \"audio/wav\",\n    \"audio/webm\",\n    \"audio/3gpp\",\n    \"audio/3gpp2\",\n    \"audio/mp3\",\n  ],\n};\n\nexport interface UIKitMessageTypes {\n  ADMIN: \"ADMIN\";\n  TEXT: \"TEXT\";\n  FILE: \"FILE\";\n  THUMBNAIL: \"THUMBNAIL\";\n  OG: \"OG\";\n  UNKNOWN: \"UNKNOWN\";\n}\nconst UIKitMessageTypes: UIKitMessageTypes = {\n  ADMIN: \"ADMIN\",\n  TEXT: \"TEXT\",\n  FILE: \"FILE\",\n  THUMBNAIL: \"THUMBNAIL\",\n  OG: \"OG\",\n  UNKNOWN: \"UNKNOWN\",\n};\nexport interface UIKitFileTypes {\n  IMAGE: \"IMAGE\";\n  AUDIO: \"AUDIO\";\n  VIDEO: \"VIDEO\";\n  GIF: \"GIF\";\n  OTHERS: \"OTHERS\";\n}\nexport const UIKitFileTypes: UIKitFileTypes = {\n  IMAGE: \"IMAGE\",\n  AUDIO: \"AUDIO\",\n  VIDEO: \"VIDEO\",\n  GIF: \"GIF\",\n  OTHERS: \"OTHERS\",\n};\n\nexport interface SendingMessageStatus {\n  NONE: \"none\";\n  SUCCEEDED: \"succeeded\";\n  FAILED: \"failed\";\n  PENDING: \"pending\";\n}\nconst SendingMessageStatus: SendingMessageStatus = {\n  NONE: \"none\",\n  SUCCEEDED: \"succeeded\",\n  FAILED: \"failed\",\n  PENDING: \"pending\",\n};\n\ninterface OutgoingMessageStates {\n  NONE: \"NONE\";\n  PENDING: \"PENDING\";\n  SENT: \"SENT\";\n  FAILED: \"FAILED\";\n  DELIVERED: \"DELIVERED\";\n  READ: \"READ\";\n  // delivered and read are only in group channel\n}\nexport const OutgoingMessageStates: OutgoingMessageStates = {\n  NONE: \"NONE\",\n  PENDING: \"PENDING\",\n  SENT: \"SENT\",\n  FAILED: \"FAILED\",\n  DELIVERED: \"DELIVERED\",\n  READ: \"READ\",\n};\n\nexport type CoreMessageType = (AdminMessage | UserMessage | FileMessage) & {\n  // Add `isOperatorMessage` attribute manually since Sendbird type declaration doesnt provide it explicitly\n  isOperatorMessage?: boolean;\n};\n\nexport const isImage = (type: string): boolean =>\n  SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;\nexport const isVideo = (type: string): boolean =>\n  SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;\nexport const isGif = (type: string): boolean => type === \"image/gif\";\nexport const isSupportedFileView = (type: string): boolean =>\n  isImage(type) || isVideo(type);\nexport const isAudio = (type: string): boolean =>\n  SUPPORTED_MIMES.AUDIO.indexOf(type) >= 0;\n\nexport const getUIKitFileTypes = (): UIKitFileTypes => ({ ...UIKitFileTypes });\nexport const getUIKitFileType = (type: string): string => {\n  if (isImage(type)) return UIKitFileTypes.IMAGE;\n  if (isVideo(type)) return UIKitFileTypes.VIDEO;\n  if (isAudio(type)) return UIKitFileTypes.AUDIO;\n  if (isGif(type)) return UIKitFileTypes.GIF;\n  return UIKitFileTypes.OTHERS;\n};\nexport const getOutgoingMessageStates = (): OutgoingMessageStates => ({\n  ...OutgoingMessageStates,\n});\nexport const getOutgoingMessageState = (\n  channel: GroupChannel | OpenChannel,\n  message: UserMessage | FileMessage\n): string => {\n  if (message.sendingStatus === \"pending\") return OutgoingMessageStates.PENDING;\n  if (message.sendingStatus === \"failed\") return OutgoingMessageStates.FAILED;\n  if (channel.isGroupChannel()) {\n    /* GroupChannel only */\n    if ((channel as GroupChannel).getUnreadMemberCount(message) === 0) {\n      return OutgoingMessageStates.READ;\n    } else if (\n      (channel as GroupChannel).getUndeliveredMemberCount(message) === 0\n    ) {\n      return OutgoingMessageStates.DELIVERED;\n    }\n  }\n  if (message.sendingStatus === \"succeeded\") return OutgoingMessageStates.SENT;\n  return OutgoingMessageStates.NONE;\n};\nexport const isSentMessage = (\n  channel: GroupChannel | OpenChannel,\n  message: UserMessage | FileMessage\n): boolean =>\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.SENT ||\n  getOutgoingMessageState(channel, message) ===\n    OutgoingMessageStates.DELIVERED ||\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ;\nexport const isDeliveredMessage = (\n  channel: GroupChannel,\n  message: UserMessage | FileMessage\n): boolean =>\n  getOutgoingMessageState(channel, message) ===\n    OutgoingMessageStates.DELIVERED ||\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ;\nexport const isReadMessage = (\n  channel: GroupChannel,\n  message: UserMessage | FileMessage\n): boolean =>\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ;\nexport const isFailedMessage = (\n  channel: GroupChannel | OpenChannel,\n  message: UserMessage | FileMessage\n): boolean =>\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.FAILED;\nexport const isPendingMessage = (\n  channel: GroupChannel | OpenChannel,\n  message: UserMessage | FileMessage\n): boolean =>\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.PENDING;\nexport const isSentStatus = (state: string): boolean =>\n  state === OutgoingMessageStates.SENT ||\n  state === OutgoingMessageStates.DELIVERED ||\n  state === OutgoingMessageStates.READ;\n\nexport const isAdminMessage = (message: AdminMessage): boolean =>\n  message &&\n  (message.isAdminMessage?.() ||\n    (message[\"messageType\"] && message.messageType === \"admin\"));\nexport const isUserMessage = (message: UserMessage): boolean =>\n  message &&\n  (message.isUserMessage?.() ||\n    (message[\"messageType\"] && message.messageType === \"user\"));\nexport const isFileMessage = (message: FileMessage): boolean =>\n  message &&\n  (message.isFileMessage?.() ||\n    (message[\"messageType\"] && message.messageType === \"file\"));\n\nexport const isOGMessage = (message: UserMessage): boolean =>\n  !!(\n    message &&\n    isUserMessage(message) &&\n    message?.ogMetaData &&\n    message?.ogMetaData?.url\n  );\nexport const isTextMessage = (message: UserMessage): boolean =>\n  isUserMessage(message) && \n  !isOGMessage(message) && \n  !isAssignmentMessage(message.customType) && \n  !isMaterialMessage(message.customType);\nexport const isThumbnailMessage = (message: FileMessage): boolean =>\n  message && isFileMessage(message) && isSupportedFileView(message.type);\nexport const isImageMessage = (message: FileMessage): boolean =>\n  message && isThumbnailMessage(message) && isImage(message.type);\nexport const isVideoMessage = (message: FileMessage): boolean =>\n  message && isThumbnailMessage(message) && isVideo(message.type);\nexport const isGifMessage = (message: FileMessage): boolean =>\n  message && isThumbnailMessage(message) && isGif(message.type);\nexport const isAudioMessage = (message: FileMessage): boolean =>\n  message && isFileMessage(message) && isAudio(message.type);\n\nexport const isEditedMessage = (message: UserMessage): boolean =>\n  isUserMessage(message) && message?.updatedAt > 0;\nexport const isEnabledOGMessage = (message: UserMessage): boolean =>\n  !message || !message.ogMetaData || !message.ogMetaData.url ? false : true;\n\nexport const getUIKitMessageTypes = (): UIKitMessageTypes => ({\n  ...UIKitMessageTypes,\n});\nexport const getUIKitMessageType = (message: CoreMessageType): string => {\n  if (isAdminMessage(message as AdminMessage)) return UIKitMessageTypes.ADMIN;\n  if (isUserMessage(message as UserMessage)) {\n    return isOGMessage(message as UserMessage)\n      ? UIKitMessageTypes.OG\n      : UIKitMessageTypes.TEXT;\n  }\n  if (isFileMessage(message as FileMessage)) {\n    return isThumbnailMessage(message as FileMessage)\n      ? UIKitMessageTypes.THUMBNAIL\n      : UIKitMessageTypes.FILE;\n  }\n  return UIKitMessageTypes.UNKNOWN;\n};\nexport const getSendingMessageStatus = (): SendingMessageStatus => ({\n  ...SendingMessageStatus,\n});\n\nconst reducer = (\n  accumulator: Array<string>,\n  currentValue: string | Array<string>\n): Array<any> => {\n  if (Array.isArray(currentValue)) {\n    return [...accumulator, ...currentValue];\n  } else {\n    accumulator.push(currentValue);\n    return accumulator;\n  }\n};\nexport const getClassName = (\n  classNames: string | Array<string | Array<string>>\n): string =>\n  Array.isArray(classNames)\n    ? classNames.reduce(reducer, []).join(\" \")\n    : classNames;\nexport const isReactedBy = (userId: string, reaction: Reaction): boolean =>\n  reaction.userIds.some(\n    (reactorUserId: string): boolean => reactorUserId === userId\n  );\ninterface StringSet {\n  TOOLTIP__YOU: string;\n  TOOLTIP__AND_YOU: string;\n  TOOLTIP__UNKNOWN_USER: string;\n}\nexport const getEmojiTooltipString = (\n  reaction: Reaction,\n  userId: string,\n  memberNicknamesMap: Map<string, string>,\n  stringSet: StringSet\n): string => {\n  let you = \"\";\n  if (isReactedBy(userId, reaction)) {\n    you =\n      reaction.userIds.length === 1\n        ? stringSet.TOOLTIP__YOU\n        : stringSet.TOOLTIP__AND_YOU;\n  }\n  return `${reaction.userIds\n    .filter((reactorUserId: string) => reactorUserId !== userId)\n    .map(\n      (reactorUserId: string) =>\n        memberNicknamesMap.get(reactorUserId) || stringSet.TOOLTIP__UNKNOWN_USER\n    )\n    .join(\", \")}${you}`;\n};\n\n// TODO: Use the interface after language tranlsatation of Sendbird.js\ninterface UIKitStore {\n  stores: {\n    sdkStore: {\n      sdk: SendBirdInstance;\n    };\n    userStore: {\n      user: User;\n    };\n  };\n  config: {\n    useReaction: boolean;\n  };\n}\nexport const getCurrentUserId = (store: UIKitStore): string =>\n  store?.stores?.userStore?.user?.userId;\nexport const getUseReaction = (\n  store: UIKitStore,\n  channel: GroupChannel | OpenChannel\n): boolean => {\n  if (!store?.config?.useReaction) return false;\n  if (!store?.stores?.sdkStore?.sdk?.appInfo?.isUsingReaction) return false;\n  if (channel?.isGroupChannel())\n    return !(\n      (channel as GroupChannel).isBroadcast || (channel as GroupChannel).isSuper\n    );\n  return store?.config?.useReaction;\n};\n\nexport const isMessageSentByMe = (\n  userId: string,\n  message: UserMessage | FileMessage\n): boolean =>\n  userId && message?.sender?.userId && userId === message.sender.userId;\n\nexport const isMessageSentByOperator = (message: CoreMessageType): boolean =>\n  message?.isOperatorMessage || false;\n\nconst URL_REG = /[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\nexport const isUrl = (text: string): boolean => URL_REG.test(text);\n\nexport const truncateString = (fullStr: string, strLen?: number): string => {\n  if (!strLen) strLen = 40;\n  if (fullStr === null || fullStr === undefined) return \"\";\n  if (fullStr.length <= strLen) return fullStr;\n  const separator = \"...\";\n  const sepLen = separator.length;\n  const charsToShow = strLen - sepLen;\n  const frontChars = Math.ceil(charsToShow / 2);\n  const backChars = Math.floor(charsToShow / 2);\n  return (\n    fullStr.substr(0, frontChars) +\n    separator +\n    fullStr.substr(fullStr.length - backChars)\n  );\n};\n\nexport const copyToClipboard = (text: string): boolean => {\n  // @ts-ignore: Unreachable code error\n  if (window.clipboardData && window.clipboardData.setData) {\n    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n    // @ts-ignore: Unreachable code error\n    return window.clipboardData.setData(\"Text\", text);\n  }\n  if (\n    document.queryCommandSupported &&\n    document.queryCommandSupported(\"copy\")\n  ) {\n    const textarea = document.createElement(\"textarea\");\n    textarea.textContent = text;\n    textarea.style.position = \"fixed\"; // Prevent scrolling to bottom of page in Microsoft Edge.\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand(\"copy\"); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n  return false;\n};\n\nexport const getEmojiListAll = (emojiContainer: EmojiContainer): Array<Emoji> =>\n  emojiContainer.emojiCategories\n    .map((emojiCategory: EmojiCategory) => emojiCategory.emojis)\n    .reduce(\n      (prevArr: Array<Emoji>, currArr: Array<Emoji>) => prevArr.concat(currArr),\n      []\n    );\nexport const getEmojiMapAll = (\n  emojiContainer: EmojiContainer\n): Map<string, Emoji> => {\n  const emojiMap = new Map();\n  emojiContainer.emojiCategories.forEach((category: EmojiCategory) =>\n    category.emojis.forEach((emoji: Emoji): void => {\n      emojiMap.set(emoji.key, emoji);\n    })\n  );\n  return emojiMap;\n};\n\nexport const getUserName = (user: User): string =>\n  user?.friendName || user?.nickname || user?.userId;\nexport const getSenderName = (message: UserMessage | FileMessage): string =>\n  message.sender && getUserName(message.sender);\nexport const getMessageCreatedAt = (\n  message: UserMessage | FileMessage\n): string => format(message.createdAt || 0, \"HH:mm\");\n\nexport const hasSameMembers = <T>(a: T[], b: T[]): boolean => {\n  if (a === b) {\n    return true;\n  }\n  if (a == null || b == null) {\n    return false;\n  }\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  const sortedA = [...a].sort();\n  const sortedB = [...b].sort();\n\n  for (let i = 0; i < sortedA.length; ++i) {\n    if (sortedA[i] !== sortedB[i]) {\n      return false;\n    }\n  }\n  return true;\n};\nexport const isFriend = (user: User): boolean =>\n  !!(user.friendDiscoveryKey || user.friendName);\n\nexport const filterMessageListParams = (\n  params: MessageListParams,\n  message: UserMessage | FileMessage | AdminMessage\n): boolean => {\n  if (params?.messageType && params.messageType !== message.messageType) {\n    return false;\n  }\n  if (\n    params?.customTypes?.length > 0 &&\n    !params.customTypes.includes(message.customType)\n  ) {\n    return false;\n  }\n  if (params?.senderUserIds && params?.senderUserIds?.length > 0) {\n    if (message?.isUserMessage() || message.isFileMessage()) {\n      const messageSender =\n        (message as UserMessage | FileMessage).sender || message[\"_sender\"];\n      if (!params?.senderUserIds?.includes(messageSender?.userId)) {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  }\n  return true;\n};\n\ninterface SDKChannelListParamsPrivateProps extends GroupChannelListQuery {\n  _searchFilter: {\n    search_query: string;\n    search_fields: Array<\"member_nickname\" | \"channel_name\">;\n  };\n  _userIdsFilter: {\n    userIds: Array<string>;\n    includeMode: boolean;\n    queryType: \"AND\" | \"OR\";\n  };\n}\nexport const filterChannelListParams = (\n  params: SDKChannelListParamsPrivateProps,\n  channel: GroupChannel,\n  currentUserId: string\n): boolean => {\n  if (\n    !params?.includeEmpty &&\n    channel?.lastMessage &&\n    channel.lastMessage === null\n  ) {\n    return false;\n  }\n  if (\n    params?._searchFilter?.search_query &&\n    params._searchFilter.search_fields?.length > 0\n  ) {\n    const searchFilter = params._searchFilter;\n    const searchQuery = searchFilter.search_query;\n    const searchFields = searchFilter.search_fields;\n    if (searchQuery && searchFields && searchFields.length > 0) {\n      if (\n        !searchFields.some((searchField) => {\n          switch (searchField) {\n            case \"channel_name\": {\n              return channel.name\n                .toLowerCase()\n                .includes(searchQuery.toLowerCase());\n            }\n            case \"member_nickname\": {\n              return channel.members.some((member: Member) =>\n                member.nickname\n                  .toLowerCase()\n                  .includes(searchQuery.toLowerCase())\n              );\n            }\n            default: {\n              return true;\n            }\n          }\n        })\n      ) {\n        return false;\n      }\n    }\n  }\n  if (params?._userIdsFilter?.userIds?.length > 0) {\n    const userIdsFilter = params._userIdsFilter;\n    const { includeMode, queryType } = userIdsFilter;\n    const userIds: string[] = userIdsFilter.userIds;\n    const memberIds = channel.members.map((member: Member) => member.userId);\n    if (!includeMode) {\n      // exact match\n      if (!userIds.includes(currentUserId)) {\n        userIds.push(currentUserId); // add the caller's userId if not added already.\n      }\n      if (channel.members.length > userIds.length) {\n        return false; // userIds may contain one or more non-member(s).\n      }\n      if (!hasSameMembers(userIds, memberIds)) {\n        return false;\n      }\n    } else if (userIds.length > 0) {\n      // inclusive\n      switch (queryType) {\n        case \"AND\": {\n          if (userIds.some((userId: string) => !memberIds.includes(userId))) {\n            return false;\n          }\n          break;\n        }\n        case \"OR\": {\n          if (userIds.every((userId: string) => !memberIds.includes(userId))) {\n            return false;\n          }\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n    }\n  }\n  if (params?.includeEmpty === false && channel?.lastMessage === null) {\n    return false;\n  }\n  if (params?.includeFrozen === false && channel?.isFrozen === true) {\n    return false;\n  }\n  if (\n    params?.customTypesFilter?.length > 0 &&\n    !params.customTypesFilter.includes(channel?.customType)\n  ) {\n    return false;\n  }\n  if (\n    params?.customTypeStartsWithFilter &&\n    !new RegExp(`^${params.customTypeStartsWithFilter}`).test(\n      channel?.customType\n    )\n  ) {\n    return false;\n  }\n  if (\n    params?.channelNameContainsFilter &&\n    !channel?.name\n      ?.toLowerCase()\n      .includes(params.channelNameContainsFilter.toLowerCase())\n  ) {\n    return false;\n  }\n  if (params?.nicknameContainsFilter) {\n    const lowerCasedSubString = params.nicknameContainsFilter.toLowerCase();\n    if (\n      channel?.members?.every(\n        (member: Member) =>\n          !member.nickname.toLowerCase().includes(lowerCasedSubString)\n      )\n    ) {\n      return false;\n    }\n  }\n  if (\n    params?.channelUrlsFilter?.length > 0 &&\n    !params.channelUrlsFilter.includes(channel?.url)\n  ) {\n    return false;\n  }\n  if (params?.memberStateFilter) {\n    switch (params.memberStateFilter) {\n      case \"joined_only\":\n        if (channel?.myMemberState !== \"joined\") {\n          return false;\n        }\n        break;\n      case \"invited_only\":\n        if (channel?.myMemberState !== \"invited\") {\n          return false;\n        }\n        break;\n      case \"invited_by_friend\":\n        if (\n          channel?.myMemberState !== \"invited\" ||\n          !isFriend(channel.inviter)\n        ) {\n          return false;\n        }\n        break;\n      case \"invited_by_non_friend\":\n        if (channel?.myMemberState !== \"invited\" || isFriend(channel.inviter)) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.hiddenChannelFilter) {\n    switch (params.hiddenChannelFilter) {\n      case \"unhidden_only\":\n        if (channel?.isHidden || channel?.hiddenState !== \"unhidden\") {\n          return false;\n        }\n        break;\n      case \"hidden_only\":\n        if (!channel?.isHidden) {\n          return false;\n        }\n        break;\n      case \"hidden_allow_auto_unhide\":\n        if (\n          !channel?.isHidden ||\n          channel?.hiddenState !== \"hidden_allow_auto_unhide\"\n        ) {\n          return false;\n        }\n        break;\n      case \"hidden_prevent_auto_unhide\":\n        if (\n          !channel?.isHidden ||\n          channel?.hiddenState !== \"hidden_prevent_auto_unhide\"\n        ) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.unreadChannelFilter) {\n    switch (params.unreadChannelFilter) {\n      case \"unread_message\":\n        if (channel?.unreadMessageCount === 0) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.publicChannelFilter) {\n    switch (params.publicChannelFilter) {\n      case \"public\":\n        if (!channel?.isPublic) {\n          return false;\n        }\n        break;\n      case \"private\":\n        if (channel?.isPublic) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.superChannelFilter) {\n    switch (params.superChannelFilter) {\n      case \"super\":\n        if (!channel?.isSuper) {\n          return false;\n        }\n        break;\n      case \"nonsuper\":\n        if (channel?.isSuper) {\n          return false;\n        }\n        break;\n    }\n  }\n  return true;\n};\n\nexport const binarySearch = (list: Array<number>, number: number): number => {\n  // [100, 99, 98, 97, ...]\n  const pivot = Math.floor(list.length / 2);\n  if (list[pivot] === number) {\n    return pivot;\n  }\n  const leftList = list.slice(0, pivot);\n  const rightList = list.slice(pivot + 1, list.length);\n  if (list[pivot] > number) {\n    return (\n      pivot + 1 + (rightList.length === 0 ? 0 : binarySearch(rightList, number))\n    );\n  } else {\n    return leftList.length === 0 ? pivot : binarySearch(leftList, number);\n  }\n};\n// This is required when channel is displayed on channel list by filter\nexport const getChannelsWithUpsertedChannel = (\n  channels: Array<GroupChannel>,\n  channel: GroupChannel\n): Array<GroupChannel> => {\n  if (channels.some((ch: GroupChannel) => ch.url === channel.url)) {\n    return channels.map((ch: GroupChannel) =>\n      ch.url === channel.url ? channel : ch\n    );\n  }\n  const targetIndex = binarySearch(\n    channels.map(\n      (channel: GroupChannel) =>\n        channel?.lastMessage?.createdAt || channel?.createdAt\n    ),\n    channel?.lastMessage?.createdAt || channel?.createdAt\n  );\n  return [\n    ...channels.slice(0, targetIndex),\n    channel,\n    ...channels.slice(targetIndex, channels.length),\n  ];\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nconst IconButton = React.forwardRef((props, ref) => {\n  const {\n    className,\n    children,\n    disabled,\n    width,\n    height,\n    type,\n    onClick,\n    onBlur,\n    style,\n  } = props;\n\n  const [pressed, setPressed] = useState('');\n\n  return (\n    // eslint-disable-next-line react/button-has-type\n    <button\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-iconbutton',\n        pressed,\n      ].join(' ')}\n      disabled={disabled}\n      ref={ref}\n      type={type} // eslint-disable-line react/button-has-type\n      style={{\n        ...style,\n        height,\n        width,\n      }}\n      onClick={(e) => {\n        if (disabled) { return; }\n        setPressed('sendbird-iconbutton--pressed');\n        onClick(e);\n      }}\n      onBlur={(e) => {\n        setPressed('');\n        onBlur(e);\n      }}\n    >\n      <span className=\"sendbird-iconbutton__inner\">\n        {children}\n      </span>\n    </button>\n  );\n});\n\nIconButton.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n    PropTypes.any,\n  ]).isRequired,\n  disabled: PropTypes.bool,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  type: PropTypes.string,\n  onClick: PropTypes.func,\n  onBlur: PropTypes.func,\n  style: PropTypes.shape({}),\n};\n\nIconButton.defaultProps = {\n  className: '',\n  disabled: false,\n  width: '56px',\n  height: '56px',\n  type: 'button',\n  onClick: () => { },\n  onBlur: () => { },\n  style: {},\n};\n\nexport default IconButton;\n","// simple component to be used as modal root\nimport React from 'react';\n\nexport const MODAL_ROOT = 'sendbird-modal-root';\n\nexport default () => (\n  <div id={MODAL_ROOT} />\n);\n","export const Type = {\n  PRIMARY: 'PRIMARY',\n  SECONDARY: 'SECONDARY',\n  DANGER: 'DANGER',\n  DISABLED: 'DISABLED',\n};\n\nexport const Size = {\n  BIG: 'BIG',\n  SMALL: 'SMALL',\n};\n","import { Type, Size } from './type';\n\nexport function changeTypeToClassName(type) {\n  switch (type) {\n    case Type.PRIMARY: return 'sendbird-button--primary';\n    case Type.SECONDARY: return 'sendbird-button--secondary';\n    case Type.DANGER: return 'sendbird-button--danger';\n    case Type.DISABLED: return 'sendbird-button--disabled';\n    default: return null;\n  }\n}\n\nexport function changeSizeToClassName(size) {\n  switch (size) {\n    case Size.BIG: return 'sendbird-button--big';\n    case Size.SMALL: return 'sendbird-button--small';\n    default: return null;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { Type, Size } from './type';\nimport { changeTypeToClassName, changeSizeToClassName } from './utils';\n\nexport default function Button({\n  className,\n  type,\n  size,\n  children,\n  disabled,\n  onClick,\n}) {\n  const injectingClassNames = [\n    ...((Array.isArray(className)) ? className : [className]),\n    'sendbird-button',\n    (disabled ? 'sendbird-button__disabled' : ''),\n    changeTypeToClassName(type),\n    changeSizeToClassName(size),\n  ].join(' ');\n\n  return (\n    <button\n      className={injectingClassNames}\n      type=\"button\"\n      onClick={onClick}\n      disabled={disabled}\n    >\n      <Label\n        className=\"sendbird-button__text\"\n        type={LabelTypography.BUTTON_1}\n        color={LabelColors.ONCONTENT_1}\n      >\n        {children}\n      </Label>\n    </button>\n  );\n}\n\nexport const ButtonTypes = Type;\nexport const ButtonSizes = Size;\n\nButton.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  type: PropTypes.oneOf(Object.keys(Type)),\n  size: PropTypes.oneOf(Object.keys(Size)),\n  children: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]),\n  disabled: PropTypes.bool,\n  onClick: PropTypes.func,\n};\n\nButton.defaultProps = {\n  className: '',\n  type: Type.PRIMARY,\n  size: Size.BIG,\n  children: 'Button',\n  disabled: false,\n  onClick: () => { },\n};\n","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\n\nimport './index.scss';\n\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { MODAL_ROOT } from '../../hooks/useModal/ModalRoot';\nimport IconButton from '../IconButton';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport Button, { ButtonTypes } from '../Button';\nimport Label, { LabelTypography, LabelColors } from '../Label';\n\nexport const ModalHeader = ({ titleText }) => (\n  <div className=\"sendbird-modal__header\">\n    <Label type={LabelTypography.H_1} color={LabelColors.ONBACKGROUND_1}>\n      {titleText}\n    </Label>\n  </div>\n);\nModalHeader.propTypes = {\n  titleText: PropTypes.string.isRequired,\n};\n\nexport const ModalBody = ({ children }) => (\n  <div className=\"sendbird-modal__body\">{children}</div>\n);\nModalBody.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.element.isRequired,\n    PropTypes.arrayOf(PropTypes.element.isRequired),\n  ]),\n};\nModalBody.defaultProps = {\n  children: null,\n};\n\nexport const ModalFooter = ({\n  onSubmit,\n  onCancel,\n  disabled = false,\n  submitText,\n  type,\n}) => {\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div className=\"sendbird-modal__footer\">\n      <Button type={ButtonTypes.SECONDARY} onClick={onCancel}>\n        <Label type={LabelTypography.BUTTON_1} color={LabelColors.ONBACKGROUND_1}>\n          {stringSet.BUTTON__CANCEL}\n        </Label>\n      </Button>\n      <Button type={type} disabled={disabled} onClick={onSubmit}>\n        {submitText}\n      </Button>\n    </div>\n  );\n};\n\nModalFooter.propTypes = {\n  onCancel: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  submitText: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  type: PropTypes.string,\n};\nModalFooter.defaultProps = {\n  disabled: false,\n  type: ButtonTypes.DANGER,\n};\n\nfunction Modal(props) {\n  const {\n    children,\n    onCancel,\n    onSubmit,\n    disabled,\n    submitText,\n    titleText,\n    hideFooter,\n    type,\n  } = props;\n  return createPortal((\n    <div className=\"sendbird-modal\">\n      <div className=\"sendbird-modal__content\">\n        <ModalHeader titleText={titleText} />\n        <ModalBody>{children}</ModalBody>\n        {\n          !hideFooter && (\n            <ModalFooter\n              disabled={disabled}\n              onCancel={onCancel}\n              onSubmit={onSubmit}\n              submitText={submitText}\n              type={type}\n            />\n          )\n        }\n        <div className=\"sendbird-modal__close\">\n          <IconButton\n            width=\"32px\"\n            height=\"32px\"\n            onClick={onCancel}\n          >\n            <Icon\n              type={IconTypes.CLOSE}\n              fillColor={IconColors.DEFAULT}\n              width=\"24px\"\n              height=\"24px\"\n            />\n          </IconButton>\n        </div>\n      </div>\n      <div className=\"sendbird-modal__backdrop\" />\n    </div>\n  ), document.getElementById(MODAL_ROOT));\n}\n\nModal.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]),\n  onCancel: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  hideFooter: PropTypes.bool,\n  disabled: PropTypes.bool,\n  type: PropTypes.string,\n};\nModal.defaultProps = {\n  children: null,\n  hideFooter: false,\n  disabled: false,\n  type: ButtonTypes.DANGER,\n};\n\nexport default Modal;\n","import './color.scss';\n\nexport const Colors = {\n  ONBACKGROUND_1: 'ONBACKGROUND_1',\n  ONBACKGROUND_2: 'ONBACKGROUND_2',\n  ONBACKGROUND_3: 'ONBACKGROUND_3',\n  ONBACKGROUND_4: 'ONBACKGROUND_4',\n  ONCONTENT_1: 'ONCONTENT_1',\n  PRIMARY: 'PRIMARY',\n  ERROR: 'ERROR',\n};\n\nexport function changeColorToClassName(color) {\n  switch (color) {\n    case Colors.ONBACKGROUND_1: return 'sendbird-color--onbackground-1';\n    case Colors.ONBACKGROUND_2: return 'sendbird-color--onbackground-2';\n    case Colors.ONBACKGROUND_3: return 'sendbird-color--onbackground-3';\n    case Colors.ONBACKGROUND_4: return 'sendbird-color--onbackground-4';\n    case Colors.ONCONTENT_1: return 'sendbird-color--oncontent-1';\n    case Colors.PRIMARY: return 'sendbird-color--primary';\n    case Colors.ERROR: return 'sendbird-color--error';\n    default: return null;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\nimport { changeColorToClassName, Colors } from '../../utils/color';\n\nexport default function TextButton({\n  className,\n  color,\n  disabled,\n  notUnderline,\n  onClick,\n  children,\n}) {\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        changeColorToClassName(color),\n        notUnderline ? 'sendbird-textbutton--not-underline' : 'sendbird-textbutton',\n        disabled ? 'sendbird-textbutton--disabled' : '',\n      ].join(' ')}\n      role=\"button\"\n      tabIndex={0}\n      onClick={onClick}\n      onKeyPress={onClick}\n    >\n      {children}\n    </div>\n  );\n}\n\nTextButton.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  color: PropTypes.string,\n  disabled: PropTypes.bool,\n  notUnderline: PropTypes.bool,\n  onClick: PropTypes.func,\n  children: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element,\n  ]).isRequired,\n};\n\nTextButton.defaultProps = {\n  className: '',\n  color: Colors.ONBACKGROUND_1,\n  disabled: false,\n  notUnderline: false,\n  onClick: () => { },\n};\n","export const USER_UPDATED = 'USER_UPDATED';\nexport const SEND_MESSAGE_START = 'SEND_MESSAGE_START';\nexport const SEND_USER_MESSAGE = 'SEND_USER_MESSAGE';\nexport const SEND_FILE_MESSAGE = 'SEND_FILE_MESSAGE';\nexport const UPDATE_USER_MESSAGE = 'UPDATE_USER_MESSAGE';\nexport const DELETE_MESSAGE = 'DELETE_MESSAGE';\nexport const LEAVE_CHANNEL = 'LEAVE_CHANNEL';\nexport const CREATE_CHANNEL = 'CREATE_CHANNEL';\n","import * as topics from './pubSub/topics';\n\nexport const getSdk = (store) => {\n  const { stores = {} } = store;\n  const { sdkStore = {} } = stores;\n  const { sdk } = sdkStore;\n  return sdk;\n};\n\nexport const getPubSub = (store) => {\n  const { config = {} } = store;\n  const { pubSub } = config;\n  return pubSub;\n};\n\n// SendBird disconnect. Invalidates currentUser\n// eslint-disable-next-line max-len\nexport const getConnect = (store) => (userId, accessToken) => new Promise((resolve, reject) => {\n  const sdk = getSdk(store);\n  if (!sdk) {\n    reject(new Error('Sdk not found'));\n  }\n  if (!accessToken) {\n    sdk.connect(userId)\n      .then((res) => resolve(res))\n      .catch((err) => reject(err));\n  } else {\n    sdk.connect(userId, accessToken)\n      .then((res) => resolve(res))\n      .catch((err) => reject(err));\n  }\n});\n\n// SendBird disconnect. Invalidates currentUser\nexport const getDisconnect = (store) => () => new Promise((resolve, reject) => {\n  const sdk = getSdk(store);\n  if (!sdk) {\n    reject(new Error('Sdk not found'));\n  }\n  sdk.disconnect()\n    .then((res) => resolve(res))\n    .catch((err) => reject(err));\n});\n\n// Using the updateCurrentUserInfo() method\n// you can update a user's nickname and profile image with a URL\n// eslint-disable-next-line max-len\nexport const getUpdateUserInfo = (store) => (nickName, profileUrl) => new Promise((resolve, reject) => {\n  const sdk = getSdk(store);\n  if (!sdk) {\n    reject(new Error('Sdk not found'));\n  }\n  sdk.updateCurrentUserInfo(nickName, profileUrl)\n    .then((res) => resolve(res))\n    .catch((err) => reject(err));\n});\n\nexport const getSendUserMessage = (store) => (channelUrl, userMessageParams) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const promisify = () => {\n          let pendingMsg = null;\n          const pendingPromise = new Promise((resolve_, reject_) => {\n            pendingMsg = channel.sendUserMessage(userMessageParams, (res, err) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let message = res;\n              let error = err;\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n              if (error) {\n                reject_(error);\n                return;\n              }\n              resolve_(message);\n              pubsub.publish(\n                topics.SEND_USER_MESSAGE,\n                {\n                  message,\n                  channel,\n                },\n              );\n            });\n            pubsub.publish(\n              topics.SEND_MESSAGE_START,\n              {\n                message: pendingMsg,\n                channel,\n              },\n            );\n          });\n          pendingPromise.get = () => pendingMsg;\n          return pendingPromise;\n        };\n        resolve(promisify());\n      })\n      .catch(reject);\n  });\n};\nexport const getSendFileMessage = (store) => (channelUrl, fileMessageParams) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const promisify = () => {\n          let pendingMsg = null;\n          const pendingPromise = new Promise((resolve_, reject_) => {\n            pendingMsg = channel.sendFileMessage(fileMessageParams, (res, err) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let message = res;\n              let error = err;\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n\n              if (error) {\n                reject_(error);\n                return;\n              }\n              resolve_(message);\n              pubsub.publish(\n                topics.SEND_FILE_MESSAGE,\n                {\n                  message,\n                  channel,\n                },\n              );\n            });\n          });\n          if (fileMessageParams.file) {\n            // keep the file's local version in pendingMsg.localUrl\n            // because promise doesnt allow overriding of pendingMsg.url\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = URL.createObjectURL(fileMessageParams.file);\n          }\n          if (fileMessageParams.fileUrl) {\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = fileMessageParams.fileUrl;\n          }\n          // eslint-disable-next-line no-param-reassign\n          pendingMsg.requestState = 'pending';\n          pubsub.publish(\n            topics.SEND_MESSAGE_START,\n            {\n              message: pendingMsg,\n              channel,\n            },\n          );\n          pendingPromise.get = () => pendingMsg;\n          return pendingPromise;\n        };\n        resolve(promisify());\n      })\n      .catch(reject);\n  });\n};\nexport const getUpdateUserMessage = (store) => (channelUrl, messageId, params) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.updateUserMessage(messageId, params, (res, err) => {\n          const swapParams = sdk.getErrorFirstCallback();\n          let message = res;\n          let error = err;\n          if (swapParams) {\n            message = err;\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(message);\n          pubsub.publish(\n            topics.UPDATE_USER_MESSAGE,\n            {\n              message,\n              channel,\n              // workaround for updating channelPreview on message-edit\n              // https://sendbird.atlassian.net/browse/UIKIT-268\n              fromSelector: true,\n            },\n          );\n        });\n      })\n      .catch(reject);\n  });\n};\nexport const getDeleteMessage = (store) => (channelUrl, message) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const { messageId } = message;\n        channel.deleteMessage(message, (res, err) => {\n          const swapParams = sdk.getErrorFirstCallback();\n          let error = err;\n          if (swapParams) {\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(message);\n          pubsub.publish(\n            topics.DELETE_MESSAGE,\n            {\n              messageId,\n              channel,\n            },\n          );\n        });\n      })\n      .catch(reject);\n  });\n};\n\nexport const getResendUserMessage = (store) => (channelUrl, failedMessage) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.resendUserMessage(failedMessage)\n          .then((message) => {\n            resolve(message);\n            pubsub.publish(\n              topics.SEND_USER_MESSAGE,\n              {\n                message,\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getResendFileMessage = (store) => (channelUrl, failedMessage) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.resendFileMessage(failedMessage)\n          .then((message) => {\n            resolve(message);\n            pubsub.publish(\n              topics.SEND_FILE_MESSAGE,\n              {\n                message,\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getCreateChannel = (store) => (params) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.createChannel(params)\n      .then((channel) => {\n        resolve(channel);\n        pubsub.publish(\n          topics.CREATE_CHANNEL,\n          {\n            channel,\n          },\n        );\n      })\n      .catch(reject);\n  });\n};\n\nexport const getLeaveChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.leave()\n          .then(() => {\n            resolve(channel);\n            pubsub.publish(\n              topics.LEAVE_CHANNEL,\n              {\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getFreezeChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.freeze()\n          .then(() => {\n            // do not need pubsub here - event listener works\n            resolve(channel);\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getUnFreezeChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.unfreeze()\n          .then(() => {\n            // do not need pubsub here - event listener works\n            resolve(channel);\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getCreateOpenChannel = (store) => (params) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.createChannel(params)\n      .then((channel) => {\n        resolve(channel);\n      })\n      .catch(reject);\n  });\n};\nexport const enterOpenChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl, (openChannel, error) => {\n      if (error) {\n        reject(new Error(error));\n        return;\n      }\n\n      openChannel.enter((response, enterError) => {\n        if (error) {\n          reject(new Error(enterError));\n          return;\n        }\n        resolve(response);\n      });\n    });\n  });\n};\n\nexport const exitOpenChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl, (openChannel, error) => {\n      if (error) {\n        reject(new Error(error));\n        return;\n      }\n\n      openChannel.exit((response, exitError) => {\n        if (error) {\n          reject(new Error(exitError));\n          return;\n        }\n        resolve(response);\n      });\n    });\n  });\n};\n\nexport const getOpenChannelSendUserMessage = (store) => (channelUrl, userMessageParams) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const promisify = () => {\n          let pendingMsg = null;\n          const pendingPromise = new Promise((resolve_, reject_) => {\n            pendingMsg = channel.sendUserMessage(userMessageParams, (res, err) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let message = res;\n              let error = err;\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n              if (error) {\n                reject_(error);\n                return;\n              }\n              resolve_(message);\n              pubsub.publish(\n                topics.SEND_USER_MESSAGE,\n                {\n                  message,\n                  channel,\n                },\n              );\n            });\n            pubsub.publish(\n              topics.SEND_MESSAGE_START,\n              {\n                message: pendingMsg,\n                channel,\n              },\n            );\n          });\n          pendingPromise.get = () => pendingMsg;\n          return pendingPromise;\n        };\n        resolve(promisify());\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelSendFileMessage = (store) => (channelUrl, fileMessageParams) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const promisify = () => {\n          let pendingMsg = null;\n          const pendingPromise = new Promise((resolve_, reject_) => {\n            pendingMsg = channel.sendFileMessage(fileMessageParams, (res, err) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let message = res;\n              let error = err;\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n\n              if (error) {\n                reject_(error);\n                return;\n              }\n              resolve_(message);\n              pubsub.publish(\n                topics.SEND_FILE_MESSAGE,\n                {\n                  message,\n                  channel,\n                },\n              );\n            });\n          });\n          if (fileMessageParams.file) {\n            // keep the file's local version in pendingMsg.localUrl\n            // because promise doesnt allow overriding of pendingMsg.url\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = URL.createObjectURL(fileMessageParams.file);\n          }\n          if (fileMessageParams.fileUrl) {\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = fileMessageParams.fileUrl;\n          }\n          // eslint-disable-next-line no-param-reassign\n          pendingMsg.requestState = 'pending';\n          pubsub.publish(\n            topics.SEND_MESSAGE_START,\n            {\n              message: pendingMsg,\n              channel,\n            },\n          );\n          pendingPromise.get = () => pendingMsg;\n          return pendingPromise;\n        };\n        resolve(promisify());\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelUpdateUserMessage = (store) => (channelUrl, messageId, params) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.updateUserMessage(messageId, params, (res, err) => {\n          const swapParams = sdk.getErrorFirstCallback();\n          let message = res;\n          let error = err;\n          if (swapParams) {\n            message = err;\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(message);\n          pubsub.publish(\n            topics.UPDATE_USER_MESSAGE,\n            {\n              message,\n              channel,\n              // workaround for updating channelPreview on message-edit\n              // https://sendbird.atlassian.net/browse/UIKIT-268\n              fromSelector: true,\n            },\n          );\n        });\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelDeleteMessage = (store) => (channelUrl, message) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const { messageId } = message;\n        channel.deleteMessage(message, (res, err) => {\n          const swapParams = sdk.getErrorFirstCallback();\n          let error = err;\n          if (swapParams) {\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(message);\n          pubsub.publish(\n            topics.DELETE_MESSAGE,\n            {\n              messageId,\n              channel,\n            },\n          );\n        });\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelResendUserMessage = (store) => (channelUrl, failedMessage) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.resendUserMessage(failedMessage)\n          .then((message) => {\n            resolve(message);\n            pubsub.publish(\n              topics.SEND_USER_MESSAGE,\n              {\n                message,\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelResendFileMessage = (store) => (channelUrl, failedMessage) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.resendFileMessage(failedMessage)\n          .then((message) => {\n            resolve(message);\n            pubsub.publish(\n              topics.SEND_FILE_MESSAGE,\n              {\n                message,\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport default {\n  getSdk,\n  getConnect,\n  getDisconnect,\n  getUpdateUserInfo,\n  getSendUserMessage,\n  getSendFileMessage,\n  getUpdateUserMessage,\n  getDeleteMessage,\n  getResendUserMessage,\n  getResendFileMessage,\n  getFreezeChannel,\n  getUnFreezeChannel,\n  getCreateChannel,\n  getLeaveChannel,\n  getCreateOpenChannel,\n  getEnterOpenChannel: enterOpenChannel,\n  getExitOpenChannel: exitOpenChannel,\n  getOpenChannelSendUserMessage,\n  getOpenChannelSendFileMessage,\n  getOpenChannelUpdateUserMessage,\n  getOpenChannelDeleteMessage,\n  getOpenChannelResendUserMessage,\n  getOpenChannelResendFileMessage,\n};\n","import React, { ReactElement, useContext } from 'react';\nimport { SendbirdTypes } from '../../types';\nimport './index.scss';\n\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport withSendbirdContext from '../../lib/SendbirdSdkContext';\nimport { getSdk, getCreateChannel } from '../../lib/selectors';\nimport Avatar from '../Avatar/index';\nimport Label, { LabelColors, LabelTypography } from '../Label';\nimport Button, { ButtonTypes } from '../Button';\n\ninterface Logger {\n  info?(message: string, channel: SendbirdTypes['GroupChannel']): void;\n}\n\ninterface Props {\n  user: SendbirdTypes['User'];\n  currentUserId?: string;\n  sdk?: SendbirdTypes['SendBirdInstance'];\n  logger?: Logger;\n  disableMessaging?: boolean;\n  createChannel?(params: SendbirdTypes['GroupChannelParams']): Promise<SendbirdTypes['GroupChannel']>;\n  onSuccess?(): void;\n}\n\nfunction UserProfile({\n  user,\n  currentUserId,\n  sdk,\n  logger,\n  disableMessaging = false,\n  createChannel,\n  onSuccess,\n}: Props): ReactElement {\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div className=\"sendbird__user-profile\">\n      <section className=\"sendbird__user-profile-avatar\">\n        <Avatar\n          height=\"80px\"\n          width=\"80px\"\n          src={user.profileUrl}\n        />\n      </section>\n      <section className=\"sendbird__user-profile-name\">\n        <Label\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {user.nickname || stringSet.NO_NAME}\n        </Label>\n      </section>\n      {\n        (user.userId !== currentUserId) && !disableMessaging && (\n          <section className=\"sendbird__user-profile-message\">\n            <Button\n              type={ButtonTypes.SECONDARY}\n              onClick={() => {\n                const params = new sdk.GroupChannelParams();\n                params.isDistinct = true;\n                params.addUserIds([user.userId]);\n                onSuccess();\n                createChannel(params)\n                  .then((groupChannel) => {\n                    logger.info('UserProfile, channel create', groupChannel);\n                  });\n              }}\n            >\n              {stringSet.USER_PROFILE__MESSAGE}\n            </Button>\n          </section>\n        )\n      }\n      <div className=\"sendbird__user-profile-separator\" />\n      <section className=\"sendbird__user-profile-userId\">\n        <Label\n          className=\"sendbird__user-profile-userId--label\"\n          type={LabelTypography.CAPTION_2}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {stringSet.USER_PROFILE__USER_ID}\n        </Label>\n        <Label\n          className=\"sendbird__user-profile-userId--value\"\n          type={LabelTypography.BODY_1}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {user.userId}\n        </Label>\n      </section>\n    </div>\n  );\n}\n\nconst mapStoreToProps = (store) => ({\n  sdk: getSdk(store),\n  createChannel: getCreateChannel(store),\n  logger: store.config.logger,\n  pubsub: store.config.pubSub,\n});\n\nconst ConnectedUserProfile = withSendbirdContext(UserProfile, mapStoreToProps);\n\nexport default ConnectedUserProfile;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nexport default class MenuItems extends Component {\n  constructor(props) {\n    super(props);\n    this.menuRef = React.createRef();\n    this.state = {\n      menuStyle: {},\n      handleClickOutside: () => { },\n    };\n  }\n\n  componentDidMount() {\n    this.setupEvents();\n    this.getMenuPosition();\n    this.showParent();\n  }\n\n  componentWillUnmount() {\n    this.cleanUpEvents();\n    this.hideParent();\n  }\n\n  showParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.add('sendbird-icon--pressed');\n    }\n  }\n\n  hideParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.remove('sendbird-icon--pressed');\n    }\n  }\n\n  setupEvents = () => {\n    const { closeDropdown } = this.props;\n    const { menuRef } = this;\n    const handleClickOutside = (event) => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        closeDropdown();\n      }\n    };\n    this.setState({\n      handleClickOutside,\n    });\n\n    document.addEventListener('mousedown', handleClickOutside);\n  }\n\n  cleanUpEvents = () => {\n    const {\n      handleClickOutside,\n    } = this.state;\n    document.removeEventListener('mousedown', handleClickOutside);\n  }\n\n  getMenuPosition = () => {\n    const { parentRef, openLeft } = this.props;\n    const parentRect = parentRef.current.getBoundingClientRect();\n    const x = parentRect.x || parentRect.left;\n    const y = parentRect.y || parentRect.top;\n    const menuStyle = {\n      top: y,\n      left: x,\n    };\n\n    if (!this.menuRef.current) return menuStyle;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menuRef.current.getBoundingClientRect();\n    if (y + rect.height > innerHeight) {\n      menuStyle.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth && !openLeft) {\n      menuStyle.left -= rect.width;\n    }\n\n    if (menuStyle.top < 0) {\n      menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyle.left < 0) {\n      menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    menuStyle.top += 32;\n    if (openLeft) {\n      const padding = Number.isNaN(rect.width - 30)\n        ? 108 // default\n        : rect.width - 30;\n      menuStyle.left -= padding;\n    }\n\n    return this.setState({ menuStyle });\n  }\n\n  render() {\n    const { menuStyle } = this.state;\n    const { children, style } = this.props;\n    return (\n      createPortal(\n        (\n          <>\n            <div className=\"sendbird-dropdown__menu-backdrop\" />\n            <ul\n              className=\"sendbird-dropdown__menu\"\n              ref={this.menuRef}\n              style={{\n                display: 'inline-block',\n                position: 'fixed',\n                left: `${Math.round(menuStyle.left)}px`,\n                top: `${Math.round(menuStyle.top)}px`,\n                ...style,\n              }}\n            >\n              {children}\n            </ul>\n          </>\n        ),\n        document.getElementById('sendbird-dropdown-portal'),\n      )\n    );\n  }\n}\nMenuItems.propTypes = {\n  closeDropdown: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]).isRequired,\n  style: PropTypes.shape({}),\n  // https://stackoverflow.com/a/51127130\n  parentRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  parentContainRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  openLeft: PropTypes.bool,\n};\nMenuItems.defaultProps = {\n  style: {},\n  openLeft: false,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nconst componentClassName = 'sendbird-sort-by-row';\nexport default function SortByRow({\n  className,\n  maxItemCount,\n  itemWidth,\n  itemHeight,\n  children,\n}) {\n  if (children.length > maxItemCount) {\n    const result = [];\n\n    for (let i = 0; i < children.length; i += maxItemCount) {\n      result.push(\n        <div\n          className={[\n            ...(Array.isArray(className) ? className : [className]),\n            componentClassName,\n          ].join(' ')}\n          key={className + i}\n          style={{\n            width: itemWidth * maxItemCount,\n            height: itemHeight,\n          }}\n        >\n          {\n            children.slice(i, i + maxItemCount)\n          }\n        </div>,\n      );\n    }\n    return result;\n  }\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        componentClassName,\n      ].join(' ')}\n      style={{\n        width: itemWidth * children.length,\n        height: itemHeight,\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n\nSortByRow.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  maxItemCount: PropTypes.number.isRequired,\n  itemWidth: PropTypes.number.isRequired,\n  itemHeight: PropTypes.number.isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]).isRequired,\n};\n\nSortByRow.defaultProps = {\n  className: '',\n};\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport SortByRow from '../../SortByRow';\n\nexport default class EmojiListItems extends Component {\n  constructor(props) {\n    super(props);\n    this.reactionRef = React.createRef();\n    this.state = {\n      reactionStyle: {},\n      handleClickOutside: () => { },\n    };\n  }\n\n  componentDidMount() {\n    this.setupEvents();\n    this.getBarPosition();\n    this.showParent();\n  }\n\n  componentWillUnmount() {\n    this.cleanUpEvents();\n    this.hideParent();\n  }\n\n  showParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.add('sendbird-reactions--pressed');\n    }\n  }\n\n  hideParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.remove('sendbird-reactions--pressed');\n    }\n  }\n\n  setupEvents = () => {\n    const { closeDropdown } = this.props;\n    const { reactionRef } = this;\n    const handleClickOutside = (event) => {\n      if (reactionRef.current && !reactionRef.current.contains(event.target)) {\n        closeDropdown();\n      }\n    };\n    this.setState({\n      handleClickOutside,\n    });\n    document.addEventListener('mousedown', handleClickOutside);\n  }\n\n  cleanUpEvents = () => {\n    const {\n      handleClickOutside,\n    } = this.state;\n    document.removeEventListener('mousedown', handleClickOutside);\n  }\n\n  getBarPosition = () => {\n    // calculate the location that the context menu should be\n    const {\n      parentRef,\n      spaceFromTrigger,\n    } = this.props;\n    const spaceFromTriggerX = spaceFromTrigger.x || 0;\n    const spaceFromTriggerY = spaceFromTrigger.y || 0;\n\n    const parentRect = parentRef.current.getBoundingClientRect();\n\n    const x = parentRect.x || parentRect.left;\n    const y = parentRect.y || parentRect.top;\n\n    const reactionStyle = {\n      top: y,\n      left: x,\n    };\n\n    if (!this.reactionRef.current) return reactionStyle;\n    const rect = this.reactionRef.current.getBoundingClientRect();\n\n    if (reactionStyle.top < rect.height) {\n      reactionStyle.top += parentRect.height;\n      reactionStyle.top += spaceFromTriggerY;\n    } else {\n      reactionStyle.top -= rect.height;\n      reactionStyle.top -= spaceFromTriggerY;\n    }\n\n    reactionStyle.left -= (rect.width / 2);\n    reactionStyle.left += (parentRect.height / 2) - 2;\n    reactionStyle.left += spaceFromTriggerX;\n\n    const maximumLeft = (window.innerWidth - rect.width);\n    if (maximumLeft < reactionStyle.left) {\n      reactionStyle.left = maximumLeft;\n    }\n    if (reactionStyle.left < 0) {\n      reactionStyle.left = 0;\n    }\n\n    return this.setState({ reactionStyle });\n  }\n\n  render() {\n    const { reactionStyle } = this.state;\n    const { children } = this.props;\n    return (\n      createPortal(\n        <>\n          <div className=\"sendbird-dropdown__menu-backdrop\" />\n          <ul\n            className=\"sendbird-dropdown__reaction-bar\"\n            ref={this.reactionRef}\n            style={{\n              display: 'inline-block',\n              position: 'fixed',\n              left: `${Math.round(reactionStyle.left)}px`,\n              top: `${Math.round(reactionStyle.top)}px`,\n            }}\n          >\n            <SortByRow\n              className=\"sendbird-dropdown__reaction-bar__row\"\n              maxItemCount={8}\n              itemWidth={44}\n              itemHeight={40}\n            >\n              {children}\n            </SortByRow>\n          </ul>\n        </>,\n        document.getElementById('sendbird-emoji-list-portal'),\n      )\n    );\n  }\n}\nEmojiListItems.propTypes = {\n  closeDropdown: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]).isRequired,\n  parentRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  parentContainRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  spaceFromTrigger: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number,\n  }),\n};\nEmojiListItems.defaultProps = {\n  spaceFromTrigger: {},\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { getClassName } from '../../utils';\n\nimport MenuItems_ from './items/MenuItems';\nimport EmojiListItems_ from './items/EmojiListItems';\n\nconst ENTER = 13;\n\nexport const MenuItems = MenuItems_;\nexport const EmojiListItems = EmojiListItems_;\n\nexport const MenuItem = ({\n  className,\n  children,\n  onClick,\n  disable,\n}) => {\n  const handleClickEvent = (e) => { if (!disable) onClick(e); };\n  return (\n    <li\n      className={getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : ''])}\n      role=\"menuitem\"\n      onClick={handleClickEvent}\n      onKeyPress={(e) => { if (e.keyCode === ENTER) handleClickEvent(e); }}\n      tabIndex={0}\n    >\n      <Label\n        className=\"sendbird-dropdown__menu-item__text\"\n        type={LabelTypography.SUBTITLE_2}\n        color={disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1}\n      >\n        {children}\n      </Label>\n    </li>\n  );\n};\n\nMenuItem.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  children: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element,\n  ]).isRequired,\n  onClick: PropTypes.func.isRequired,\n  disable: PropTypes.func,\n};\n\nMenuItem.defaultProps = {\n  className: '',\n  disable: false,\n};\n\n// Root components should be appended before ContextMenu is rendered\nexport const MenuRoot = () => (\n  <div id=\"sendbird-dropdown-portal\" />\n);\nexport const EmojiReactionListRoot = () => (\n  <div id=\"sendbird-emoji-list-portal\" />\n);\n\nexport default function ContextMenu({ menuTrigger, menuItems }) {\n  const [showMenu, setShowMenu] = useState(false);\n\n  return (\n    <div className=\"sendbird-context-menu\" style={{ display: 'inline' }}>\n      {menuTrigger(() => setShowMenu(!showMenu))}\n      {showMenu && menuItems(() => setShowMenu(false))}\n    </div>\n  );\n}\n\nContextMenu.propTypes = {\n  menuTrigger: PropTypes.func.isRequired,\n  menuItems: PropTypes.func.isRequired,\n};\n"],"names":["UserProfileContext","React","createContext","disableUserProfile","isOpenChannel","renderUserProfile","UserProfileProvider","props","children","className","propTypes","PropTypes","oneOfType","element","arrayOf","any","isRequired","bool","func","string","defaultProps","isAssignmentMessage","customType","isMaterialMessage","convertCtaLinkToWebLink","cta","listOfSerials","split","workspaceSerial","classroomSerial","serial","type_","url","convertAssignmentDueUTCtoLocale","dueAt","localeDate","Date","toLocaleString","SUPPORTED_MIMES","IMAGE","VIDEO","AUDIO","UIKitMessageTypes","ADMIN","TEXT","FILE","THUMBNAIL","OG","UNKNOWN","UIKitFileTypes","GIF","OTHERS","SendingMessageStatus","NONE","SUCCEEDED","FAILED","PENDING","OutgoingMessageStates","SENT","DELIVERED","READ","isImage","type","indexOf","isVideo","isGif","isSupportedFileView","isAudio","getUIKitFileType","getOutgoingMessageStates","getOutgoingMessageState","channel","message","sendingStatus","isGroupChannel","getUnreadMemberCount","getUndeliveredMemberCount","isSentMessage","isFailedMessage","isPendingMessage","isSentStatus","state","isAdminMessage","messageType","isUserMessage","isFileMessage","isOGMessage","ogMetaData","isTextMessage","isThumbnailMessage","isVideoMessage","isGifMessage","isEditedMessage","updatedAt","getUIKitMessageTypes","getUIKitMessageType","getSendingMessageStatus","reducer","accumulator","currentValue","Array","isArray","push","getClassName","classNames","reduce","join","isReactedBy","userId","reaction","userIds","some","reactorUserId","getEmojiTooltipString","memberNicknamesMap","stringSet","you","length","TOOLTIP__YOU","TOOLTIP__AND_YOU","filter","map","get","TOOLTIP__UNKNOWN_USER","isMessageSentByMe","sender","isMessageSentByOperator","isOperatorMessage","URL_REG","isUrl","text","test","truncateString","fullStr","strLen","undefined","separator","sepLen","charsToShow","frontChars","Math","ceil","backChars","floor","substr","copyToClipboard","window","clipboardData","setData","document","queryCommandSupported","textarea","createElement","textContent","style","position","body","appendChild","select","execCommand","ex","removeChild","getEmojiListAll","emojiContainer","emojiCategories","emojiCategory","emojis","prevArr","currArr","concat","getEmojiMapAll","emojiMap","Map","forEach","category","emoji","set","key","getUserName","user","friendName","nickname","getSenderName","getMessageCreatedAt","format","createdAt","hasSameMembers","a","b","sortedA","__spreadArray","sort","sortedB","i","isFriend","friendDiscoveryKey","filterMessageListParams","params","customTypes","includes","senderUserIds","messageSender","filterChannelListParams","currentUserId","includeEmpty","lastMessage","_searchFilter","search_query","search_fields","searchFilter","searchQuery_1","searchFields","searchField","name","toLowerCase","members","member","_userIdsFilter","userIdsFilter","includeMode","queryType","memberIds_1","every","includeFrozen","isFrozen","customTypesFilter","customTypeStartsWithFilter","RegExp","channelNameContainsFilter","nicknameContainsFilter","lowerCasedSubString_1","channelUrlsFilter","memberStateFilter","myMemberState","inviter","hiddenChannelFilter","isHidden","hiddenState","unreadChannelFilter","unreadMessageCount","publicChannelFilter","isPublic","superChannelFilter","isSuper","binarySearch","list","number","pivot","leftList","slice","rightList","getChannelsWithUpsertedChannel","channels","ch","targetIndex","IconButton","forwardRef","ref","disabled","width","height","onClick","onBlur","useState","pressed","setPressed","e","shape","MODAL_ROOT","Type","PRIMARY","SECONDARY","DANGER","DISABLED","Size","BIG","SMALL","changeTypeToClassName","changeSizeToClassName","size","Button","injectingClassNames","Label","LabelTypography","BUTTON_1","LabelColors","ONCONTENT_1","ButtonTypes","ButtonSizes","oneOf","Object","keys","ModalHeader","titleText","H_1","ONBACKGROUND_1","ModalBody","ModalFooter","onSubmit","onCancel","submitText","useContext","LocalizationContext","BUTTON__CANCEL","Modal","hideFooter","createPortal","Icon","IconTypes","CLOSE","IconColors","DEFAULT","getElementById","Colors","ONBACKGROUND_2","ONBACKGROUND_3","ONBACKGROUND_4","ERROR","changeColorToClassName","color","TextButton","notUnderline","SEND_MESSAGE_START","SEND_USER_MESSAGE","SEND_FILE_MESSAGE","UPDATE_USER_MESSAGE","DELETE_MESSAGE","LEAVE_CHANNEL","CREATE_CHANNEL","getSdk","store","stores","sdkStore","sdk","getPubSub","config","pubSub","getConnect","accessToken","Promise","resolve","reject","Error","connect","then","res","catch","err","getDisconnect","disconnect","getUpdateUserInfo","nickName","profileUrl","updateCurrentUserInfo","getSendUserMessage","channelUrl","userMessageParams","pubsub","GroupChannel","getChannel","promisify","pendingMsg","pendingPromise","resolve_","reject_","sendUserMessage","swapParams","getErrorFirstCallback","error","publish","topics","getSendFileMessage","fileMessageParams","sendFileMessage","file","localUrl","URL","createObjectURL","fileUrl","requestState","getUpdateUserMessage","messageId","updateUserMessage","fromSelector","getDeleteMessage","deleteMessage","getResendUserMessage","failedMessage","resendUserMessage","getResendFileMessage","resendFileMessage","getCreateChannel","createChannel","getLeaveChannel","leave","getFreezeChannel","freeze","getUnFreezeChannel","unfreeze","getCreateOpenChannel","OpenChannel","enterOpenChannel","openChannel","enter","response","enterError","exitOpenChannel","exit","exitError","getOpenChannelSendUserMessage","getOpenChannelSendFileMessage","getOpenChannelUpdateUserMessage","getOpenChannelDeleteMessage","getOpenChannelResendUserMessage","getOpenChannelResendFileMessage","getEnterOpenChannel","getExitOpenChannel","UserProfile","_a","logger","_b","disableMessaging","onSuccess","Avatar","H_2","NO_NAME","GroupChannelParams","isDistinct","addUserIds","groupChannel","info","USER_PROFILE__MESSAGE","CAPTION_2","USER_PROFILE__USER_ID","BODY_1","mapStoreToProps","ConnectedUserProfile","withSendbirdContext","MenuItems","parentContainRef","current","classList","add","remove","closeDropdown","menuRef","handleClickOutside","event","contains","target","setState","addEventListener","removeEventListener","parentRef","openLeft","parentRect","getBoundingClientRect","x","left","y","top","menuStyle","innerWidth","innerHeight","rect","padding","Number","isNaN","createRef","setupEvents","getMenuPosition","showParent","cleanUpEvents","hideParent","display","round","Component","instanceOf","Element","componentClassName","SortByRow","maxItemCount","itemWidth","itemHeight","result","EmojiListItems","reactionRef","spaceFromTrigger","spaceFromTriggerX","spaceFromTriggerY","reactionStyle","maximumLeft","getBarPosition","ENTER","MenuItems_","EmojiListItems_","MenuItem","disable","handleClickEvent","keyCode","SUBTITLE_2","ContextMenu","menuTrigger","menuItems","showMenu","setShowMenu"],"mappings":";;;;;;;;;;;;;;AAGA;AACA;AACA;AACA;;IACMA,kBAAkB,gBAAGC,yBAAK,CAACC,aAAN,CAAoB;AAC7CC,EAAAA,kBAAkB,EAAE,IADyB;AAE7CC,EAAAA,aAAa,EAAE,KAF8B;AAG7CC,EAAAA,iBAAiB,EAAE;AAH0B,CAApB;;IAMrBC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,KAAD,EAAW;AACrC,MAAQC,QAAR,GAAgCD,KAAhC,CAAQC,QAAR;AAAA,MAAkBC,SAAlB,GAAgCF,KAAhC,CAAkBE,SAAlB;AACA,sBACER,wCAAC,kBAAD,CAAoB,QAApB;AAA6B,IAAA,KAAK,EAAEM;AAApC,kBACEN;AAAK,IAAA,SAAS,EAAEQ;AAAhB,KACGD,QADH,CADF,CADF;AAOD;;AAEDF,mBAAmB,CAACI,SAApB,GAAgC;AAC9BF,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OADkB,EAE5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAF4B,EAG5BF,6BAAS,CAACI,GAHkB,CAApB,EAIPC,UAL2B;AAM9B;AACAZ,EAAAA,aAAa,EAAEO,6BAAS,CAACM,IAPK;AAQ9B;AACAd,EAAAA,kBAAkB,EAAEQ,6BAAS,CAACM,IATA;AAU9B;AACAZ,EAAAA,iBAAiB,EAAEM,6BAAS,CAACO,IAXC;AAY9BT,EAAAA,SAAS,EAAEE,6BAAS,CAACQ;AAZS,CAAhC;AAeAb,mBAAmB,CAACc,YAApB,GAAmC;AACjCX,EAAAA,SAAS,EAAE,IADsB;AAEjCL,EAAAA,aAAa,EAAE,KAFkB;AAGjCD,EAAAA,kBAAkB,EAAE,KAHa;AAIjCE,EAAAA,iBAAiB,EAAE;AAJc,CAAnC;;ICvCagB,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,UAAD;AACjC,SAAAA,UAAU,KAAK,YAAf;AAA2B;IAEhBC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACD,UAAD;AAC/B,SAAAA,UAAU,KAAK,UAAf;AAAyB;IAEdE,uBAAuB,GAAG,SAA1BA,uBAA0B,CACrCC,GADqC,EAErCH,UAFqC;AAIrC,MAAMI,aAAa,GAAGD,GAAG,CAACE,KAAJ,CAAU,GAAV,CAAtB;AACA,MAAMC,eAAe,GAAGF,aAAa,CAAC,CAAD,CAAb,CAAiBC,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,CAAxB;AACA,MAAME,eAAe,GAAGH,aAAa,CAAC,CAAD,CAAb,CAAiBC,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,CAAxB;AACA,MAAMG,MAAM,GAAGJ,aAAa,CAAC,CAAD,CAAb,CAAiBC,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,CAAf;AACA,MAAMI,KAAK,GAAGT,UAAU,KAAK,YAAf,GAA8B,YAA9B,GAA6C,UAA3D;AACA,MAAMU,GAAG,GAAG,2CAAyCJ,eAAzC,gBAAA,GAAsEC,eAAtE,MAAA,GAAyFE,KAAzF,aAAA,GAAyGD,MAArH;AAEA,SAAOE,GAAP;AACD;IAEYC,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACC,KAAD;AAC7C,MAAMC,UAAU,GAAG,IAAIC,IAAJ,CAASF,KAAT,EAAgBG,cAAhB,EAAnB;AACA,SAAOF,UAAP;AACD;;ACHD,IAAMG,eAAe,GAAG;AACtBC,EAAAA,KAAK,EAAE,CACL,YADK,EAEL,WAFK,EAGL,WAHK,EAIL,WAJK,EAKL,eALK,EAML,YANK;AAAA,GADe;AAStBC,EAAAA,KAAK,EAAE,CAAC,YAAD,EAAe,WAAf,EAA4B,YAA5B,EAA0C,WAA1C,CATe;AAUtBC,EAAAA,KAAK,EAAE,CACL,WADK,EAEL,YAFK,EAGL,cAHK,EAIL,YAJK,EAKL,WALK,EAML,YANK,EAOL,WAPK,EAQL,YARK,EASL,YATK,EAUL,aAVK,EAWL,WAXK;AAVe,CAAxB;AAiCA,IAAMC,iBAAiB,GAAsB;AAC3CC,EAAAA,KAAK,EAAE,OADoC;AAE3CC,EAAAA,IAAI,EAAE,MAFqC;AAG3CC,EAAAA,IAAI,EAAE,MAHqC;AAI3CC,EAAAA,SAAS,EAAE,WAJgC;AAK3CC,EAAAA,EAAE,EAAE,IALuC;AAM3CC,EAAAA,OAAO,EAAE;AANkC,CAA7C;AAeO,IAAMC,cAAc,GAAmB;AAC5CV,EAAAA,KAAK,EAAE,OADqC;AAE5CE,EAAAA,KAAK,EAAE,OAFqC;AAG5CD,EAAAA,KAAK,EAAE,OAHqC;AAI5CU,EAAAA,GAAG,EAAE,KAJuC;AAK5CC,EAAAA,MAAM,EAAE;AALoC,CAAvC;AAcP,IAAMC,oBAAoB,GAAyB;AACjDC,EAAAA,IAAI,EAAE,MAD2C;AAEjDC,EAAAA,SAAS,EAAE,WAFsC;AAGjDC,EAAAA,MAAM,EAAE,QAHyC;AAIjDC,EAAAA,OAAO,EAAE;AAJwC,CAAnD;IAgBaC,qBAAqB,GAA0B;AAC1DJ,EAAAA,IAAI,EAAE,MADoD;AAE1DG,EAAAA,OAAO,EAAE,SAFiD;AAG1DE,EAAAA,IAAI,EAAE,MAHoD;AAI1DH,EAAAA,MAAM,EAAE,QAJkD;AAK1DI,EAAAA,SAAS,EAAE,WAL+C;AAM1DC,EAAAA,IAAI,EAAE;AANoD;IAc/CC,OAAO,GAAG,SAAVA,OAAU,CAACC,IAAD;AACrB,SAAAxB,eAAe,CAACC,KAAhB,CAAsBwB,OAAtB,CAA8BD,IAA9B,KAAuC,CAAvC;AAAwC;IAC7BE,OAAO,GAAG,SAAVA,OAAU,CAACF,IAAD;AACrB,SAAAxB,eAAe,CAACE,KAAhB,CAAsBuB,OAAtB,CAA8BD,IAA9B,KAAuC,CAAvC;AAAwC;AACnC,IAAMG,KAAK,GAAG,SAARA,KAAQ,CAACH,IAAD;AAA2B,SAAAA,IAAI,KAAK,WAAT;AAAoB,CAA7D;IACMI,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACJ,IAAD;AACjC,SAAAD,OAAO,CAACC,IAAD,CAAP,IAAiBE,OAAO,CAACF,IAAD,CAAxB;AAA8B;AACzB,IAAMK,OAAO,GAAG,SAAVA,OAAU,CAACL,IAAD;AACrB,SAAAxB,eAAe,CAACG,KAAhB,CAAsBsB,OAAtB,CAA8BD,IAA9B,KAAuC,CAAvC;AAAwC,CADnC;IAIMM,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACN,IAAD;AAC9B,MAAID,OAAO,CAACC,IAAD,CAAX,EAAmB,OAAOb,cAAc,CAACV,KAAtB;AACnB,MAAIyB,OAAO,CAACF,IAAD,CAAX,EAAmB,OAAOb,cAAc,CAACT,KAAtB;AACnB,MAAI2B,OAAO,CAACL,IAAD,CAAX,EAAmB,OAAOb,cAAc,CAACR,KAAtB;AACnB,MAAIwB,KAAK,CAACH,IAAD,CAAT,EAAiB,OAAOb,cAAc,CAACC,GAAtB;AACjB,SAAOD,cAAc,CAACE,MAAtB;AACD;IACYkB,wBAAwB,GAAG,SAA3BA,wBAA2B;AAA6B,0CAChEZ,sBADgE;AAEnE;IACWa,uBAAuB,GAAG,SAA1BA,uBAA0B,CACrCC,OADqC,EAErCC,OAFqC;AAIrC,MAAIA,OAAO,CAACC,aAAR,KAA0B,SAA9B,EAAyC,OAAOhB,qBAAqB,CAACD,OAA7B;AACzC,MAAIgB,OAAO,CAACC,aAAR,KAA0B,QAA9B,EAAwC,OAAOhB,qBAAqB,CAACF,MAA7B;;AACxC,MAAIgB,OAAO,CAACG,cAAR,EAAJ,EAA8B;AAC5B;AACA,QAAKH,OAAwB,CAACI,oBAAzB,CAA8CH,OAA9C,MAA2D,CAAhE,EAAmE;AACjE,aAAOf,qBAAqB,CAACG,IAA7B;AACD,KAFD,MAEO,IACJW,OAAwB,CAACK,yBAAzB,CAAmDJ,OAAnD,MAAgE,CAD5D,EAEL;AACA,aAAOf,qBAAqB,CAACE,SAA7B;AACD;AACF;;AACD,MAAIa,OAAO,CAACC,aAAR,KAA0B,WAA9B,EAA2C,OAAOhB,qBAAqB,CAACC,IAA7B;AAC3C,SAAOD,qBAAqB,CAACJ,IAA7B;AACD;IACYwB,aAAa,GAAG,SAAhBA,aAAgB,CAC3BN,OAD2B,EAE3BC,OAF2B;AAI3B,SAAAF,uBAAuB,CAACC,OAAD,EAAUC,OAAV,CAAvB,KAA8Cf,qBAAqB,CAACC,IAApE,IACAY,uBAAuB,CAACC,OAAD,EAAUC,OAAV,CAAvB,KACEf,qBAAqB,CAACE,SAFxB,IAGAW,uBAAuB,CAACC,OAAD,EAAUC,OAAV,CAAvB,KAA8Cf,qBAAqB,CAACG,IAHpE;AAGwE;IAa7DkB,eAAe,GAAG,SAAlBA,eAAkB,CAC7BP,OAD6B,EAE7BC,OAF6B;AAI7B,SAAAF,uBAAuB,CAACC,OAAD,EAAUC,OAAV,CAAvB,KAA8Cf,qBAAqB,CAACF,MAApE;AAA0E;IAC/DwB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAC9BR,OAD8B,EAE9BC,OAF8B;AAI9B,SAAAF,uBAAuB,CAACC,OAAD,EAAUC,OAAV,CAAvB,KAA8Cf,qBAAqB,CAACD,OAApE;AAA2E;IAChEwB,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD;AAC1B,SAAAA,KAAK,KAAKxB,qBAAqB,CAACC,IAAhC,IACAuB,KAAK,KAAKxB,qBAAqB,CAACE,SADhC,IAEAsB,KAAK,KAAKxB,qBAAqB,CAACG,IAFhC;AAEoC;AAE/B,IAAMsB,cAAc,GAAG,SAAjBA,cAAiB,CAACV,OAAD;;;AAC5B,SAAAA,OAAO,KACN,CAAA,MAAAA,OAAO,CAACU,cAAR,UAAA,iBAAA,SAAA,WAAAV,QAAA,KACEA,OAAO,CAAC,aAAD,CAAP,IAA0BA,OAAO,CAACW,WAAR,KAAwB,OAF9C,CAAP;AAE8D,CAHzD;IAIMC,aAAa,GAAG,SAAhBA,aAAgB,CAACZ,OAAD;;;AAC3B,SAAAA,OAAO,KACN,CAAA,MAAAA,OAAO,CAACY,aAAR,UAAA,iBAAA,SAAA,WAAAZ,QAAA,KACEA,OAAO,CAAC,aAAD,CAAP,IAA0BA,OAAO,CAACW,WAAR,KAAwB,MAF9C,CAAP;AAE6D;AACxD,IAAME,aAAa,GAAG,SAAhBA,aAAgB,CAACb,OAAD;;;AAC3B,SAAAA,OAAO,KACN,CAAA,MAAAA,OAAO,CAACa,aAAR,UAAA,iBAAA,SAAA,WAAAb,QAAA,KACEA,OAAO,CAAC,aAAD,CAAP,IAA0BA,OAAO,CAACW,WAAR,KAAwB,MAF9C,CAAP;AAE6D,CAHxD;IAKMG,WAAW,GAAG,SAAdA,WAAc,CAACd,OAAD;;;AACzB,SAAA,CAAC,EACCA,OAAO,IACPY,aAAa,CAACZ,OAAD,CADb,KAEAA,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEe,UAFT,MAGA,MAAAf,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEe,UAAT,UAAA,iBAAA,SAAA,MAAqBvD,GAHrB,CADD,CAAD;AAKC;IACUwD,aAAa,GAAG,SAAhBA,aAAgB,CAAChB,OAAD;AAC3B,SAAAY,aAAa,CAACZ,OAAD,CAAb,IACA,CAACc,WAAW,CAACd,OAAD,CADZ,IAEA,CAACnD,mBAAmB,CAACmD,OAAO,CAAClD,UAAT,CAFpB,IAGA,CAACC,iBAAiB,CAACiD,OAAO,CAAClD,UAAT,CAHlB;AAGsC;IAC3BmE,kBAAkB,GAAG,SAArBA,kBAAqB,CAACjB,OAAD;AAChC,SAAAA,OAAO,IAAIa,aAAa,CAACb,OAAD,CAAxB,IAAqCN,mBAAmB,CAACM,OAAO,CAACV,IAAT,CAAxD;AAAsE;IAG3D4B,cAAc,GAAG,SAAjBA,cAAiB,CAAClB,OAAD;AAC5B,SAAAA,OAAO,IAAIiB,kBAAkB,CAACjB,OAAD,CAA7B,IAA0CR,OAAO,CAACQ,OAAO,CAACV,IAAT,CAAjD;AAA+D;IACpD6B,YAAY,GAAG,SAAfA,YAAe,CAACnB,OAAD;AAC1B,SAAAA,OAAO,IAAIiB,kBAAkB,CAACjB,OAAD,CAA7B,IAA0CP,KAAK,CAACO,OAAO,CAACV,IAAT,CAA/C;AAA6D;IAIlD8B,eAAe,GAAG,SAAlBA,eAAkB,CAACpB,OAAD;AAC7B,SAAAY,aAAa,CAACZ,OAAD,CAAb,IAA0B,CAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEqB,SAAT,IAAqB,CAA/C;AAAgD;IAIrCC,oBAAoB,GAAG,SAAvBA,oBAAuB;AAAyB,0CACxDpD,kBADwD;AAE3D;IACWqD,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACvB,OAAD;AACjC,MAAIU,cAAc,CAACV,OAAD,CAAlB,EAA6C,OAAO9B,iBAAiB,CAACC,KAAzB;;AAC7C,MAAIyC,aAAa,CAACZ,OAAD,CAAjB,EAA2C;AACzC,WAAOc,WAAW,CAACd,OAAD,CAAX,GACH9B,iBAAiB,CAACK,EADf,GAEHL,iBAAiB,CAACE,IAFtB;AAGD;;AACD,MAAIyC,aAAa,CAACb,OAAD,CAAjB,EAA2C;AACzC,WAAOiB,kBAAkB,CAACjB,OAAD,CAAlB,GACH9B,iBAAiB,CAACI,SADf,GAEHJ,iBAAiB,CAACG,IAFtB;AAGD;;AACD,SAAOH,iBAAiB,CAACM,OAAzB;AACD;IACYgD,uBAAuB,GAAG,SAA1BA,uBAA0B;AAA4B,0CAC9D5C,qBAD8D;AAEjE;;AAEF,IAAM6C,OAAO,GAAG,SAAVA,OAAU,CACdC,WADc,EAEdC,YAFc;AAId,MAAIC,KAAK,CAACC,OAAN,CAAcF,YAAd,CAAJ,EAAiC;AAC/B,mFAAWD,oBAAgBC,mBAA3B;AACD,GAFD,MAEO;AACLD,IAAAA,WAAW,CAACI,IAAZ,CAAiBH,YAAjB;AACA,WAAOD,WAAP;AACD;AACF,CAVD;;IAWaK,YAAY,GAAG,SAAfA,YAAe,CAC1BC,UAD0B;AAG1B,SAAAJ,KAAK,CAACC,OAAN,CAAcG,UAAd,IACIA,UAAU,CAACC,MAAX,CAAkBR,OAAlB,EAA2B,EAA3B,EAA+BS,IAA/B,CAAoC,GAApC,CADJ,GAEIF,UAFJ;AAEc;IACHG,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD,EAAiBC,QAAjB;AACzB,SAAAA,QAAQ,CAACC,OAAT,CAAiBC,IAAjB,CACE,UAACC,aAAD;AAAoC,WAAAA,aAAa,KAAKJ,MAAlB;AAAwB,GAD9D,CAAA;AAEC;IAMUK,qBAAqB,GAAG,SAAxBA,qBAAwB,CACnCJ,QADmC,EAEnCD,MAFmC,EAGnCM,kBAHmC,EAInCC,SAJmC;AAMnC,MAAIC,GAAG,GAAG,EAAV;;AACA,MAAIT,WAAW,CAACC,MAAD,EAASC,QAAT,CAAf,EAAmC;AACjCO,IAAAA,GAAG,GACDP,QAAQ,CAACC,OAAT,CAAiBO,MAAjB,KAA4B,CAA5B,GACIF,SAAS,CAACG,YADd,GAEIH,SAAS,CAACI,gBAHhB;AAID;;AACD,SAAO,KAAGV,QAAQ,CAACC,OAAT,CACPU,MADO,CACA,UAACR,aAAD;AAA2B,WAAAA,aAAa,KAAKJ,MAAlB;AAAwB,GADnD,EAEPa,GAFO,CAGN,UAACT,aAAD;AACE,WAAAE,kBAAkB,CAACQ,GAAnB,CAAuBV,aAAvB,KAAyCG,SAAS,CAACQ,qBAAnD;AAAwE,GAJpE,EAMPjB,IANO,CAMF,IANE,CAAH,GAMSU,GANhB;AAOD;IA+BYQ,iBAAiB,GAAG,SAApBA,iBAAoB,CAC/BhB,MAD+B,EAE/BpC,OAF+B;;;AAI/B,SAAAoC,MAAM,KAAI,MAAApC,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEqD,MAAT,UAAA,iBAAA,SAAA,MAAiBjB,MAArB,CAAN,IAAqCA,MAAM,KAAKpC,OAAO,CAACqD,MAAR,CAAejB,MAA/D;AAAqE;IAE1DkB,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACtD,OAAD;AACrC,SAAA,CAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEuD,iBAAT,KAA8B,KAA9B;AAAmC;AAErC,IAAMC,OAAO,GAAG,kFAAhB;IACaC,KAAK,GAAG,SAARA,KAAQ,CAACC,IAAD;AAA2B,SAAAF,OAAO,CAACG,IAAR,CAAaD,IAAb,CAAA;AAAkB;IAErDE,cAAc,GAAG,SAAjBA,cAAiB,CAACC,OAAD,EAAkBC,MAAlB;AAC5B,MAAI,CAACA,MAAL,EAAaA,MAAM,GAAG,EAAT;AACb,MAAID,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAKE,SAApC,EAA+C,OAAO,EAAP;AAC/C,MAAIF,OAAO,CAAChB,MAAR,IAAkBiB,MAAtB,EAA8B,OAAOD,OAAP;AAC9B,MAAMG,SAAS,GAAG,KAAlB;AACA,MAAMC,MAAM,GAAGD,SAAS,CAACnB,MAAzB;AACA,MAAMqB,WAAW,GAAGJ,MAAM,GAAGG,MAA7B;AACA,MAAME,UAAU,GAAGC,IAAI,CAACC,IAAL,CAAUH,WAAW,GAAG,CAAxB,CAAnB;AACA,MAAMI,SAAS,GAAGF,IAAI,CAACG,KAAL,CAAWL,WAAW,GAAG,CAAzB,CAAlB;AACA,SACEL,OAAO,CAACW,MAAR,CAAe,CAAf,EAAkBL,UAAlB,IACAH,SADA,GAEAH,OAAO,CAACW,MAAR,CAAeX,OAAO,CAAChB,MAAR,GAAiByB,SAAhC,CAHF;AAKD;IAEYG,eAAe,GAAG,SAAlBA,eAAkB,CAACf,IAAD;AAC7B;AACA,MAAIgB,MAAM,CAACC,aAAP,IAAwBD,MAAM,CAACC,aAAP,CAAqBC,OAAjD,EAA0D;AACxD;AACA;AACA,WAAOF,MAAM,CAACC,aAAP,CAAqBC,OAArB,CAA6B,MAA7B,EAAqClB,IAArC,CAAP;AACD;;AACD,MACEmB,QAAQ,CAACC,qBAAT,IACAD,QAAQ,CAACC,qBAAT,CAA+B,MAA/B,CAFF,EAGE;AACA,QAAMC,QAAQ,GAAGF,QAAQ,CAACG,aAAT,CAAuB,UAAvB,CAAjB;AACAD,IAAAA,QAAQ,CAACE,WAAT,GAAuBvB,IAAvB;AACAqB,IAAAA,QAAQ,CAACG,KAAT,CAAeC,QAAf,GAA0B,OAA1B,CAHA;;AAIAN,IAAAA,QAAQ,CAACO,IAAT,CAAcC,WAAd,CAA0BN,QAA1B;AACAA,IAAAA,QAAQ,CAACO,MAAT;;AACA,QAAI;AACF,aAAOT,QAAQ,CAACU,WAAT,CAAqB,MAArB,CAAP,CADE;AAEH,KAFD,CAEE,OAAOC,EAAP,EAAW;AACX,aAAO,KAAP;AACD,KAJD,SAIU;AACRX,MAAAA,QAAQ,CAACO,IAAT,CAAcK,WAAd,CAA0BV,QAA1B;AACD;AACF;;AACD,SAAO,KAAP;AACD;IAEYW,eAAe,GAAG,SAAlBA,eAAkB,CAACC,cAAD;AAC7B,SAAAA,cAAc,CAACC,eAAf,CACG3C,GADH,CACO,UAAC4C,aAAD;AAAkC,WAAAA,aAAa,CAACC,MAAd;AAAoB,GAD7D,EAEG7D,MAFH,CAGI,UAAC8D,OAAD,EAAwBC,OAAxB;AAAkD,WAAAD,OAAO,CAACE,MAAR,CAAeD,OAAf,CAAA;AAAuB,GAH7E,EAII,EAJJ,CAAA;AAKG;IACQE,cAAc,GAAG,SAAjBA,cAAiB,CAC5BP,cAD4B;AAG5B,MAAMQ,QAAQ,GAAG,IAAIC,GAAJ,EAAjB;AACAT,EAAAA,cAAc,CAACC,eAAf,CAA+BS,OAA/B,CAAuC,UAACC,QAAD;AACrC,WAAAA,QAAQ,CAACR,MAAT,CAAgBO,OAAhB,CAAwB,UAACE,KAAD;AACtBJ,MAAAA,QAAQ,CAACK,GAAT,CAAaD,KAAK,CAACE,GAAnB,EAAwBF,KAAxB;AACD,KAFD,CAAA;AAEE,GAHJ;AAKA,SAAOJ,QAAP;AACD;AAEM,IAAMO,WAAW,GAAG,SAAdA,WAAc,CAACC,IAAD;AACzB,SAAA,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,SAAA,GAAAA,IAAI,CAAEC,UAAN,MAAoBD,IAAI,SAAJ,IAAAA,IAAI,WAAJ,SAAA,GAAAA,IAAI,CAAEE,QAA1B,MAAsCF,IAAI,SAAJ,IAAAA,IAAI,WAAJ,SAAA,GAAAA,IAAI,CAAEvE,MAA5C,CAAA;AAAkD,CAD7C;IAEM0E,aAAa,GAAG,SAAhBA,aAAgB,CAAC9G,OAAD;AAC3B,SAAAA,OAAO,CAACqD,MAAR,IAAkBqD,WAAW,CAAC1G,OAAO,CAACqD,MAAT,CAA7B;AAA6C;IAClC0D,mBAAmB,GAAG,SAAtBA,mBAAsB,CACjC/G,OADiC;AAEtB,SAAAgH,YAAM,CAAChH,OAAO,CAACiH,SAAR,IAAqB,CAAtB,EAAyB,OAAzB,CAAN;AAAuC;AAE7C,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAIC,CAAJ,EAAYC,CAAZ;AAC5B,MAAID,CAAC,KAAKC,CAAV,EAAa;AACX,WAAO,IAAP;AACD;;AACD,MAAID,CAAC,IAAI,IAAL,IAAaC,CAAC,IAAI,IAAtB,EAA4B;AAC1B,WAAO,KAAP;AACD;;AACD,MAAID,CAAC,CAACtE,MAAF,KAAauE,CAAC,CAACvE,MAAnB,EAA2B;AACzB,WAAO,KAAP;AACD;;AAED,MAAMwE,OAAO,GAAGC,sCAAIH,QAAJ,CAAOI,IAAP,EAAhB;;AACA,MAAMC,OAAO,GAAGF,sCAAIF,QAAJ,CAAOG,IAAP,EAAhB;;AAEA,OAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,OAAO,CAACxE,MAA5B,EAAoC,EAAE4E,CAAtC,EAAyC;AACvC,QAAIJ,OAAO,CAACI,CAAD,CAAP,KAAeD,OAAO,CAACC,CAAD,CAA1B,EAA+B;AAC7B,aAAO,KAAP;AACD;AACF;;AACD,SAAO,IAAP;AACD,CApBM;AAqBA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACf,IAAD;AACtB,SAAA,CAAC,EAAEA,IAAI,CAACgB,kBAAL,IAA2BhB,IAAI,CAACC,UAAlC,CAAD;AAA8C,CADzC;IAGMgB,uBAAuB,GAAG,SAA1BA,uBAA0B,CACrCC,MADqC,EAErC7H,OAFqC;;;AAIrC,MAAI,CAAA6H,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAElH,WAAR,KAAuBkH,MAAM,CAAClH,WAAP,KAAuBX,OAAO,CAACW,WAA1D,EAAuE;AACrE,WAAO,KAAP;AACD;;AACD,MACE,CAAA,MAAAkH,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEC,WAAR,UAAA,iBAAA,SAAA,MAAqBjF,MAArB,IAA8B,CAA9B,IACA,CAACgF,MAAM,CAACC,WAAP,CAAmBC,QAAnB,CAA4B/H,OAAO,CAAClD,UAApC,CAFH,EAGE;AACA,WAAO,KAAP;AACD;;AACD,MAAI,CAAA+K,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEG,aAAR,KAAyB,CAAA,MAAAH,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEG,aAAR,UAAA,iBAAA,SAAA,MAAuBnF,MAAvB,IAAgC,CAA7D,EAAgE;AAC9D,QAAI,CAAA7C,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEY,aAAT,EAAA,KAA4BZ,OAAO,CAACa,aAAR,EAAhC,EAAyD;AACvD,UAAMoH,aAAa,GAChBjI,OAAqC,CAACqD,MAAtC,IAAgDrD,OAAO,CAAC,SAAD,CAD1D;;AAEA,UAAI,EAAC,MAAA6H,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEG,aAAR,UAAA,iBAAA,SAAA,MAAuBD,SAASE,aAAa,SAAb,IAAAA,aAAa,WAAb,SAAA,GAAAA,aAAa,CAAE7F,OAAhD,CAAJ,EAA6D;AAC3D,eAAO,KAAP;AACD;AACF,KAND,MAMO;AACL,aAAO,KAAP;AACD;AACF;;AACD,SAAO,IAAP;AACD;IAaY8F,uBAAuB,GAAG,SAA1BA,uBAA0B,CACrCL,MADqC,EAErC9H,OAFqC,EAGrCoI,aAHqC;;;AAKrC,MACE,EAACN,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEO,YAAT,MACArI,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEsI,WADT,KAEAtI,OAAO,CAACsI,WAAR,KAAwB,IAH1B,EAIE;AACA,WAAO,KAAP;AACD;;AACD,MACE,CAAA,MAAAR,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAES,aAAR,UAAA,iBAAA,SAAA,MAAuBC,YAAvB,KACA,CAAA,MAAAV,MAAM,CAACS,aAAP,CAAqBE,aAArB,UAAA,iBAAA,SAAA,MAAoC3F,MAApC,IAA6C,CAF/C,EAGE;AACA,QAAM4F,YAAY,GAAGZ,MAAM,CAACS,aAA5B;AACA,QAAMI,aAAW,GAAGD,YAAY,CAACF,YAAjC;AACA,QAAMI,YAAY,GAAGF,YAAY,CAACD,aAAlC;;AACA,QAAIE,aAAW,IAAIC,YAAf,IAA+BA,YAAY,CAAC9F,MAAb,GAAsB,CAAzD,EAA4D;AAC1D,UACE,CAAC8F,YAAY,CAACpG,IAAb,CAAkB,UAACqG,WAAD;AACjB,gBAAQA,WAAR;AACE,eAAK,cAAL;AAAqB;AACnB,qBAAO7I,OAAO,CAAC8I,IAAR,CACJC,WADI,GAEJf,QAFI,CAEKW,aAAW,CAACI,WAAZ,EAFL,CAAP;AAGD;;AACD,eAAK,iBAAL;AAAwB;AACtB,qBAAO/I,OAAO,CAACgJ,OAAR,CAAgBxG,IAAhB,CAAqB,UAACyG,MAAD;AAC1B,uBAAAA,MAAM,CAACnC,QAAP,CACGiC,WADH,GAEGf,QAFH,CAEYW,aAAW,CAACI,WAAZ,EAFZ,CAAA;AAEsC,eAHjC,CAAP;AAKD;;AACD;AAAS;AACP,qBAAO,IAAP;AACD;AAfH;AAiBD,OAlBA,CADH,EAoBE;AACA,eAAO,KAAP;AACD;AACF;AACF;;AACD,MAAI,CAAA,MAAA,MAAAjB,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEoB,cAAR,UAAA,iBAAA,SAAA,MAAwB3G,OAAxB,UAAA,iBAAA,SAAA,MAAiCO,MAAjC,IAA0C,CAA9C,EAAiD;AAC/C,QAAMqG,aAAa,GAAGrB,MAAM,CAACoB,cAA7B;AACQ,QAAAE,WAAW,GAAgBD,aAAa,YAAxC;AAAA,QAAaE,SAAS,GAAKF,aAAa,UAAxC;AACR,QAAM5G,OAAO,GAAa4G,aAAa,CAAC5G,OAAxC;AACA,QAAM+G,WAAS,GAAGtJ,OAAO,CAACgJ,OAAR,CAAgB9F,GAAhB,CAAoB,UAAC+F,MAAD;AAAoB,aAAAA,MAAM,CAAC5G,MAAP;AAAa,KAArD,CAAlB;;AACA,QAAI,CAAC+G,WAAL,EAAkB;AAChB;AACA,UAAI,CAAC7G,OAAO,CAACyF,QAAR,CAAiBI,aAAjB,CAAL,EAAsC;AACpC7F,QAAAA,OAAO,CAACR,IAAR,CAAaqG,aAAb,EADoC;AAErC;;AACD,UAAIpI,OAAO,CAACgJ,OAAR,CAAgBlG,MAAhB,GAAyBP,OAAO,CAACO,MAArC,EAA6C;AAC3C,eAAO,KAAP,CAD2C;AAE5C;;AACD,UAAI,CAACqE,cAAc,CAAC5E,OAAD,EAAU+G,WAAV,CAAnB,EAAyC;AACvC,eAAO,KAAP;AACD;AACF,KAXD,MAWO,IAAI/G,OAAO,CAACO,MAAR,GAAiB,CAArB,EAAwB;AAC7B;AACA,cAAQuG,SAAR;AACE,aAAK,KAAL;AAAY;AACV,gBAAI9G,OAAO,CAACC,IAAR,CAAa,UAACH,MAAD;AAAoB,qBAAA,CAACiH,WAAS,CAACtB,QAAV,CAAmB3F,MAAnB,CAAD;AAA2B,aAA5D,CAAJ,EAAmE;AACjE,qBAAO,KAAP;AACD;;AACD;AACD;;AACD,aAAK,IAAL;AAAW;AACT,gBAAIE,OAAO,CAACgH,KAAR,CAAc,UAAClH,MAAD;AAAoB,qBAAA,CAACiH,WAAS,CAACtB,QAAV,CAAmB3F,MAAnB,CAAD;AAA2B,aAA7D,CAAJ,EAAoE;AAClE,qBAAO,KAAP;AACD;;AACD;AACD;AAZH;AAiBD;AACF;;AACD,MAAI,CAAAyF,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEO,YAAR,MAAyB,KAAzB,IAAkC,CAAArI,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEsI,WAAT,MAAyB,IAA/D,EAAqE;AACnE,WAAO,KAAP;AACD;;AACD,MAAI,CAAAR,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAE0B,aAAR,MAA0B,KAA1B,IAAmC,CAAAxJ,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEyJ,QAAT,MAAsB,IAA7D,EAAmE;AACjE,WAAO,KAAP;AACD;;AACD,MACE,CAAA,MAAA3B,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAE4B,iBAAR,UAAA,iBAAA,SAAA,MAA2B5G,MAA3B,IAAoC,CAApC,IACA,CAACgF,MAAM,CAAC4B,iBAAP,CAAyB1B,QAAzB,CAAkChI,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEjD,UAA3C,CAFH,EAGE;AACA,WAAO,KAAP;AACD;;AACD,MACE,CAAA+K,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAE6B,0BAAR,KACA,CAAC,IAAIC,MAAJ,CAAW,MAAI9B,MAAM,CAAC6B,0BAAtB,EAAoD/F,IAApD,CACC5D,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEjD,UADV,CAFH,EAKE;AACA,WAAO,KAAP;AACD;;AACD,MACE,CAAA+K,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAE+B,yBAAR,KACA,EAAC,MAAA7J,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE8I,IAAT,UAAA,iBAAA,SAAA,MACGC,cACDf,SAASF,MAAM,CAAC+B,yBAAP,CAAiCd,WAAjC,GAFZ,CAFF,EAKE;AACA,WAAO,KAAP;AACD;;AACD,MAAIjB,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEgC,sBAAZ,EAAoC;AAClC,QAAMC,qBAAmB,GAAGjC,MAAM,CAACgC,sBAAP,CAA8Bf,WAA9B,EAA5B;;AACA,QACE,MAAA/I,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEgJ,OAAT,UAAA,iBAAA,SAAA,MAAkBO,MAChB,UAACN,MAAD;AACE,aAAA,CAACA,MAAM,CAACnC,QAAP,CAAgBiC,WAAhB,GAA8Bf,QAA9B,CAAuC+B,qBAAvC,CAAD;AAA4D,MAHlE,EAKE;AACA,aAAO,KAAP;AACD;AACF;;AACD,MACE,CAAA,MAAAjC,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEkC,iBAAR,UAAA,iBAAA,SAAA,MAA2BlH,MAA3B,IAAoC,CAApC,IACA,CAACgF,MAAM,CAACkC,iBAAP,CAAyBhC,QAAzB,CAAkChI,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEvC,GAA3C,CAFH,EAGE;AACA,WAAO,KAAP;AACD;;AACD,MAAIqK,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEmC,iBAAZ,EAA+B;AAC7B,YAAQnC,MAAM,CAACmC,iBAAf;AACE,WAAK,aAAL;AACE,YAAI,CAAAjK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEkK,aAAT,MAA2B,QAA/B,EAAyC;AACvC,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,cAAL;AACE,YAAI,CAAAlK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEkK,aAAT,MAA2B,SAA/B,EAA0C;AACxC,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,mBAAL;AACE,YACE,CAAAlK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEkK,aAAT,MAA2B,SAA3B,IACA,CAACvC,QAAQ,CAAC3H,OAAO,CAACmK,OAAT,CAFX,EAGE;AACA,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,uBAAL;AACE,YAAI,CAAAnK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEkK,aAAT,MAA2B,SAA3B,IAAwCvC,QAAQ,CAAC3H,OAAO,CAACmK,OAAT,CAApD,EAAuE;AACrE,iBAAO,KAAP;AACD;;AACD;AAvBJ;AAyBD;;AACD,MAAIrC,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEsC,mBAAZ,EAAiC;AAC/B,YAAQtC,MAAM,CAACsC,mBAAf;AACE,WAAK,eAAL;AACE,YAAI,CAAApK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEqK,QAAT,KAAqB,CAAArK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEsK,WAAT,MAAyB,UAAlD,EAA8D;AAC5D,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,aAAL;AACE,YAAI,EAACtK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEqK,QAAV,CAAJ,EAAwB;AACtB,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,0BAAL;AACE,YACE,EAACrK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEqK,QAAV,KACA,CAAArK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEsK,WAAT,MAAyB,0BAF3B,EAGE;AACA,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,4BAAL;AACE,YACE,EAACtK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEqK,QAAV,KACA,CAAArK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEsK,WAAT,MAAyB,4BAF3B,EAGE;AACA,iBAAO,KAAP;AACD;;AACD;AA1BJ;AA4BD;;AACD,MAAIxC,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEyC,mBAAZ,EAAiC;AAC/B,YAAQzC,MAAM,CAACyC,mBAAf;AACE,WAAK,gBAAL;AACE,YAAI,CAAAvK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEwK,kBAAT,MAAgC,CAApC,EAAuC;AACrC,iBAAO,KAAP;AACD;;AACD;AALJ;AAOD;;AACD,MAAI1C,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAE2C,mBAAZ,EAAiC;AAC/B,YAAQ3C,MAAM,CAAC2C,mBAAf;AACE,WAAK,QAAL;AACE,YAAI,EAACzK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE0K,QAAV,CAAJ,EAAwB;AACtB,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,SAAL;AACE,YAAI1K,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE0K,QAAb,EAAuB;AACrB,iBAAO,KAAP;AACD;;AACD;AAVJ;AAYD;;AACD,MAAI5C,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAE6C,kBAAZ,EAAgC;AAC9B,YAAQ7C,MAAM,CAAC6C,kBAAf;AACE,WAAK,OAAL;AACE,YAAI,EAAC3K,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE4K,OAAV,CAAJ,EAAuB;AACrB,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,UAAL;AACE,YAAI5K,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE4K,OAAb,EAAsB;AACpB,iBAAO,KAAP;AACD;;AACD;AAVJ;AAYD;;AACD,SAAO,IAAP;AACD;AAEM,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,IAAD,EAAsBC,MAAtB;AAC1B;AACA,MAAMC,KAAK,GAAG3G,IAAI,CAACG,KAAL,CAAWsG,IAAI,CAAChI,MAAL,GAAc,CAAzB,CAAd;;AACA,MAAIgI,IAAI,CAACE,KAAD,CAAJ,KAAgBD,MAApB,EAA4B;AAC1B,WAAOC,KAAP;AACD;;AACD,MAAMC,QAAQ,GAAGH,IAAI,CAACI,KAAL,CAAW,CAAX,EAAcF,KAAd,CAAjB;AACA,MAAMG,SAAS,GAAGL,IAAI,CAACI,KAAL,CAAWF,KAAK,GAAG,CAAnB,EAAsBF,IAAI,CAAChI,MAA3B,CAAlB;;AACA,MAAIgI,IAAI,CAACE,KAAD,CAAJ,GAAcD,MAAlB,EAA0B;AACxB,WACEC,KAAK,GAAG,CAAR,IAAaG,SAAS,CAACrI,MAAV,KAAqB,CAArB,GAAyB,CAAzB,GAA6B+H,YAAY,CAACM,SAAD,EAAYJ,MAAZ,CAAtD,CADF;AAGD,GAJD,MAIO;AACL,WAAOE,QAAQ,CAACnI,MAAT,KAAoB,CAApB,GAAwBkI,KAAxB,GAAgCH,YAAY,CAACI,QAAD,EAAWF,MAAX,CAAnD;AACD;AACF,CAfM;;IAiBMK,8BAA8B,GAAG,SAAjCA,8BAAiC,CAC5CC,QAD4C,EAE5CrL,OAF4C;;;AAI5C,MAAIqL,QAAQ,CAAC7I,IAAT,CAAc,UAAC8I,EAAD;AAAsB,WAAAA,EAAE,CAAC7N,GAAH,KAAWuC,OAAO,CAACvC,GAAnB;AAAsB,GAA1D,CAAJ,EAAiE;AAC/D,WAAO4N,QAAQ,CAACnI,GAAT,CAAa,UAACoI,EAAD;AAClB,aAAAA,EAAE,CAAC7N,GAAH,KAAWuC,OAAO,CAACvC,GAAnB,GAAyBuC,OAAzB,GAAmCsL,EAAnC;AAAqC,KADhC,CAAP;AAGD;;AACD,MAAMC,WAAW,GAAGV,YAAY,CAC9BQ,QAAQ,CAACnI,GAAT,CACE,UAAClD,OAAD;;;AACE,WAAA,CAAA,MAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEsI,WAAT,UAAA,iBAAA,SAAA,MAAsBpB,SAAtB,MAAmClH,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEkH,SAA5C,CAAA;AAAqD,GAFzD,CAD8B,EAK9B,CAAA,MAAAlH,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEsI,WAAT,UAAA,iBAAA,SAAA,MAAsBpB,SAAtB,MAAmClH,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEkH,SAA5C,CAL8B,CAAhC;AAOA,mHACKmE,QAAQ,CAACH,KAAT,CAAe,CAAf,EAAkBK,WAAlB,WACHvL,kBACGqL,QAAQ,CAACH,KAAT,CAAeK,WAAf,EAA4BF,QAAQ,CAACvI,MAArC,QAHL;AAKD;;ICvtBK0I,UAAU,gBAAG9P,yBAAK,CAAC+P,UAAN,CAAiB,UAACzP,KAAD,EAAQ0P,GAAR,EAAgB;AAClD,MACExP,SADF,GAUIF,KAVJ,CACEE,SADF;AAAA,MAEED,QAFF,GAUID,KAVJ,CAEEC,QAFF;AAAA,MAGE0P,QAHF,GAUI3P,KAVJ,CAGE2P,QAHF;AAAA,MAIEC,KAJF,GAUI5P,KAVJ,CAIE4P,KAJF;AAAA,MAKEC,MALF,GAUI7P,KAVJ,CAKE6P,MALF;AAAA,MAMEtM,IANF,GAUIvD,KAVJ,CAMEuD,IANF;AAAA,MAOEuM,QAPF,GAUI9P,KAVJ,CAOE8P,OAPF;AAAA,MAQEC,OARF,GAUI/P,KAVJ,CAQE+P,MARF;AAAA,MASE5G,KATF,GAUInJ,KAVJ,CASEmJ,KATF;;AAYA,kBAA8B6G,cAAQ,CAAC,EAAD,CAAtC;AAAA;AAAA,MAAOC,OAAP;AAAA,MAAgBC,UAAhB;;AAEA;AAAA;AACE;AACA;AACE,MAAA,SAAS,EAAE,iDACLrK,KAAK,CAACC,OAAN,CAAc5F,SAAd,IAA2BA,SAA3B,GAAuC,CAACA,SAAD,CADlC,IAET,qBAFS,EAGT+P,OAHS,GAIT9J,IAJS,CAIJ,GAJI,CADb;AAME,MAAA,QAAQ,EAAEwJ,QANZ;AAOE,MAAA,GAAG,EAAED,GAPP;AAQE,MAAA,IAAI,EAAEnM,IARR;AAAA;AASE,MAAA,KAAK,4EACA4F,KADA;AAEH0G,QAAAA,MAAM,EAANA,MAFG;AAGHD,QAAAA,KAAK,EAALA;AAHG,QATP;AAcE,MAAA,OAAO,EAAE,iBAACO,CAAD,EAAO;AACd,YAAIR,QAAJ,EAAc;AAAE;AAAS;;AACzBO,QAAAA,UAAU,CAAC,8BAAD,CAAV;;AACAJ,QAAAA,QAAO,CAACK,CAAD,CAAP;AACD,OAlBH;AAmBE,MAAA,MAAM,EAAE,gBAACA,CAAD,EAAO;AACbD,QAAAA,UAAU,CAAC,EAAD,CAAV;;AACAH,QAAAA,OAAM,CAACI,CAAD,CAAN;AACD;AAtBH,oBAwBEzQ;AAAM,MAAA,SAAS,EAAC;AAAhB,OACGO,QADH,CAxBF;AAFF;AA+BD,CA9CkB;AAgDnBuP,UAAU,CAACrP,SAAX,GAAuB;AACrBD,EAAAA,SAAS,EAAEE,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACQ,MADmB,EAE7BR,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACQ,MAA5B,CAF6B,CAApB,CADU;AAKrBX,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OADkB,EAE5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAF4B,EAG5BF,6BAAS,CAACI,GAHkB,CAApB,EAIPC,UATkB;AAUrBkP,EAAAA,QAAQ,EAAEvP,6BAAS,CAACM,IAVC;AAWrBkP,EAAAA,KAAK,EAAExP,6BAAS,CAACQ,MAXI;AAYrBiP,EAAAA,MAAM,EAAEzP,6BAAS,CAACQ,MAZG;AAarB2C,EAAAA,IAAI,EAAEnD,6BAAS,CAACQ,MAbK;AAcrBkP,EAAAA,OAAO,EAAE1P,6BAAS,CAACO,IAdE;AAerBoP,EAAAA,MAAM,EAAE3P,6BAAS,CAACO,IAfG;AAgBrBwI,EAAAA,KAAK,EAAE/I,6BAAS,CAACgQ,KAAV,CAAgB,EAAhB;AAhBc,CAAvB;AAmBAZ,UAAU,CAAC3O,YAAX,GAA0B;AACxBX,EAAAA,SAAS,EAAE,EADa;AAExByP,EAAAA,QAAQ,EAAE,KAFc;AAGxBC,EAAAA,KAAK,EAAE,MAHiB;AAIxBC,EAAAA,MAAM,EAAE,MAJgB;AAKxBtM,EAAAA,IAAI,EAAE,QALkB;AAMxBuM,EAAAA,OAAO,EAAE,mBAAM,EANS;AAOxBC,EAAAA,MAAM,EAAE,kBAAM,EAPU;AAQxB5G,EAAAA,KAAK,EAAE;AARiB,CAA1B;;ACxEA;IAGakH,UAAU,GAAG;;ICHbC,IAAI,GAAG;AAClBC,EAAAA,OAAO,EAAE,SADS;AAElBC,EAAAA,SAAS,EAAE,WAFO;AAGlBC,EAAAA,MAAM,EAAE,QAHU;AAIlBC,EAAAA,QAAQ,EAAE;AAJQ;AAOb,IAAMC,IAAI,GAAG;AAClBC,EAAAA,GAAG,EAAE,KADa;AAElBC,EAAAA,KAAK,EAAE;AAFW,CAAb;;ACLA,SAASC,qBAAT,CAA+BvN,IAA/B,EAAqC;AAC1C,UAAQA,IAAR;AACE,SAAK+M,IAAI,CAACC,OAAV;AAAmB,aAAO,0BAAP;;AACnB,SAAKD,IAAI,CAACE,SAAV;AAAqB,aAAO,4BAAP;;AACrB,SAAKF,IAAI,CAACG,MAAV;AAAkB,aAAO,yBAAP;;AAClB,SAAKH,IAAI,CAACI,QAAV;AAAoB,aAAO,2BAAP;;AACpB;AAAS,aAAO,IAAP;AALX;AAOD;AAEM,SAASK,qBAAT,CAA+BC,IAA/B,EAAqC;AAC1C,UAAQA,IAAR;AACE,SAAKL,IAAI,CAACC,GAAV;AAAe,aAAO,sBAAP;;AACf,SAAKD,IAAI,CAACE,KAAV;AAAiB,aAAO,wBAAP;;AACjB;AAAS,aAAO,IAAP;AAHX;AAKD;;ACVc,SAASI,MAAT,OAOZ;AAAA,MAND/Q,SAMC,QANDA,SAMC;AAAA,MALDqD,IAKC,QALDA,IAKC;AAAA,MAJDyN,IAIC,QAJDA,IAIC;AAAA,MAHD/Q,QAGC,QAHDA,QAGC;AAAA,MAFD0P,QAEC,QAFDA,QAEC;AAAA,MADDG,OACC,QADDA,OACC;AACD,MAAMoB,mBAAmB,GAAG,iDACrBrL,KAAK,CAACC,OAAN,CAAc5F,SAAd,CAAD,GAA6BA,SAA7B,GAAyC,CAACA,SAAD,CADnB,IAE1B,iBAF0B,EAGzByP,QAAQ,GAAG,2BAAH,GAAiC,EAHhB,EAI1BmB,qBAAqB,CAACvN,IAAD,CAJK,EAK1BwN,qBAAqB,CAACC,IAAD,CALK,GAM1B7K,IAN0B,CAMrB,GANqB,CAA5B;AAQA,sBACEzG;AACE,IAAA,SAAS,EAAEwR,mBADb;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,OAAO,EAAEpB,OAHX;AAIE,IAAA,QAAQ,EAAEH;AAJZ,kBAMEjQ,wCAACyR,WAAD;AACE,IAAA,SAAS,EAAC,uBADZ;AAEE,IAAA,IAAI,EAAEC,qBAAe,CAACC,QAFxB;AAGE,IAAA,KAAK,EAAEC,iBAAW,CAACC;AAHrB,KAKGtR,QALH,CANF,CADF;AAgBD;IAEYuR,WAAW,GAAGlB;IACdmB,WAAW,GAAGd;AAE3BM,MAAM,CAAC9Q,SAAP,GAAmB;AACjBD,EAAAA,SAAS,EAAEE,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACQ,MADmB,EAE7BR,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACQ,MAA5B,CAF6B,CAApB,CADM;AAKjB2C,EAAAA,IAAI,EAAEnD,6BAAS,CAACsR,KAAV,CAAgBC,MAAM,CAACC,IAAP,CAAYtB,IAAZ,CAAhB,CALW;AAMjBU,EAAAA,IAAI,EAAE5Q,6BAAS,CAACsR,KAAV,CAAgBC,MAAM,CAACC,IAAP,CAAYjB,IAAZ,CAAhB,CANW;AAOjB1Q,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACQ,MADkB,EAE5BR,6BAAS,CAACE,OAFkB,EAG5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAH4B,CAApB,CAPO;AAYjBqP,EAAAA,QAAQ,EAAEvP,6BAAS,CAACM,IAZH;AAajBoP,EAAAA,OAAO,EAAE1P,6BAAS,CAACO;AAbF,CAAnB;AAgBAsQ,MAAM,CAACpQ,YAAP,GAAsB;AACpBX,EAAAA,SAAS,EAAE,EADS;AAEpBqD,EAAAA,IAAI,EAAE+M,IAAI,CAACC,OAFS;AAGpBS,EAAAA,IAAI,EAAEL,IAAI,CAACC,GAHS;AAIpB3Q,EAAAA,QAAQ,EAAE,QAJU;AAKpB0P,EAAAA,QAAQ,EAAE,KALU;AAMpBG,EAAAA,OAAO,EAAE,mBAAM;AANK,CAAtB;;AChDO,IAAM+B,WAAW,GAAG,SAAdA,WAAc;AAAA,MAAGC,SAAH,QAAGA,SAAH;AAAA,sBACzBpS;AAAK,IAAA,SAAS,EAAC;AAAf,kBACEA,wCAACyR,WAAD;AAAO,IAAA,IAAI,EAAEC,qBAAe,CAACW,GAA7B;AAAkC,IAAA,KAAK,EAAET,iBAAW,CAACU;AAArD,KACGF,SADH,CADF,CADyB;AAAA,CAApB;AAOPD,WAAW,CAAC1R,SAAZ,GAAwB;AACtB2R,EAAAA,SAAS,EAAE1R,6BAAS,CAACQ,MAAV,CAAiBH;AADN,CAAxB;AAIO,IAAMwR,SAAS,GAAG,SAAZA,SAAY;AAAA,MAAGhS,QAAH,SAAGA,QAAH;AAAA,sBACvBP;AAAK,IAAA,SAAS,EAAC;AAAf,KAAuCO,QAAvC,CADuB;AAAA,CAAlB;AAGPgS,SAAS,CAAC9R,SAAV,GAAsB;AACpBF,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OAAV,CAAkBG,UADU,EAE5BL,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAAV,CAAkBG,UAApC,CAF4B,CAApB;AADU,CAAtB;AAMAwR,SAAS,CAACpR,YAAV,GAAyB;AACvBZ,EAAAA,QAAQ,EAAE;AADa,CAAzB;AAIO,IAAMiS,WAAW,GAAG,SAAdA,WAAc,QAMrB;AAAA,MALJC,QAKI,SALJA,QAKI;AAAA,MAJJC,QAII,SAJJA,QAII;AAAA,6BAHJzC,QAGI;AAAA,MAHJA,QAGI,+BAHO,KAGP;AAAA,MAFJ0C,UAEI,SAFJA,UAEI;AAAA,MADJ9O,IACI,SADJA,IACI;;AACJ,oBAAsB+O,gBAAU,CAACC,uCAAD,CAAhC;AAAA,MAAQ3L,SAAR,eAAQA,SAAR;;AACA,sBACElH;AAAK,IAAA,SAAS,EAAC;AAAf,kBACEA,wCAAC,MAAD;AAAQ,IAAA,IAAI,EAAE8R,WAAW,CAAChB,SAA1B;AAAqC,IAAA,OAAO,EAAE4B;AAA9C,kBACE1S,wCAACyR,WAAD;AAAO,IAAA,IAAI,EAAEC,qBAAe,CAACC,QAA7B;AAAuC,IAAA,KAAK,EAAEC,iBAAW,CAACU;AAA1D,KACGpL,SAAS,CAAC4L,cADb,CADF,CADF,eAME9S,wCAAC,MAAD;AAAQ,IAAA,IAAI,EAAE6D,IAAd;AAAoB,IAAA,QAAQ,EAAEoM,QAA9B;AAAwC,IAAA,OAAO,EAAEwC;AAAjD,KACGE,UADH,CANF,CADF;AAYD,CApBM;AAsBPH,WAAW,CAAC/R,SAAZ,GAAwB;AACtBiS,EAAAA,QAAQ,EAAEhS,6BAAS,CAACO,IAAV,CAAeF,UADH;AAEtB0R,EAAAA,QAAQ,EAAE/R,6BAAS,CAACO,IAAV,CAAeF,UAFH;AAGtB4R,EAAAA,UAAU,EAAEjS,6BAAS,CAACQ,MAAV,CAAiBH,UAHP;AAItBkP,EAAAA,QAAQ,EAAEvP,6BAAS,CAACM,IAJE;AAKtB6C,EAAAA,IAAI,EAAEnD,6BAAS,CAACQ;AALM,CAAxB;AAOAsR,WAAW,CAACrR,YAAZ,GAA2B;AACzB8O,EAAAA,QAAQ,EAAE,KADe;AAEzBpM,EAAAA,IAAI,EAAEiO,WAAW,CAACf;AAFO,CAA3B;;AAKA,SAASgC,KAAT,CAAezS,KAAf,EAAsB;AACpB,MACEC,QADF,GASID,KATJ,CACEC,QADF;AAAA,MAEEmS,QAFF,GASIpS,KATJ,CAEEoS,QAFF;AAAA,MAGED,QAHF,GASInS,KATJ,CAGEmS,QAHF;AAAA,MAIExC,QAJF,GASI3P,KATJ,CAIE2P,QAJF;AAAA,MAKE0C,UALF,GASIrS,KATJ,CAKEqS,UALF;AAAA,MAMEP,SANF,GASI9R,KATJ,CAME8R,SANF;AAAA,MAOEY,UAPF,GASI1S,KATJ,CAOE0S,UAPF;AAAA,MAQEnP,IARF,GASIvD,KATJ,CAQEuD,IARF;AAUA,sBAAOoP,qBAAY,eACjBjT;AAAK,IAAA,SAAS,EAAC;AAAf,kBACEA;AAAK,IAAA,SAAS,EAAC;AAAf,kBACEA,wCAAC,WAAD;AAAa,IAAA,SAAS,EAAEoS;AAAxB,IADF,eAEEpS,wCAAC,SAAD,QAAYO,QAAZ,CAFF,EAII,CAACyS,UAAD,iBACEhT,wCAAC,WAAD;AACE,IAAA,QAAQ,EAAEiQ,QADZ;AAEE,IAAA,QAAQ,EAAEyC,QAFZ;AAGE,IAAA,QAAQ,EAAED,QAHZ;AAIE,IAAA,UAAU,EAAEE,UAJd;AAKE,IAAA,IAAI,EAAE9O;AALR,IALN,eAcE7D;AAAK,IAAA,SAAS,EAAC;AAAf,kBACEA,wCAAC,UAAD;AACE,IAAA,KAAK,EAAC,MADR;AAEE,IAAA,MAAM,EAAC,MAFT;AAGE,IAAA,OAAO,EAAE0S;AAHX,kBAKE1S,wCAACkT,UAAD;AACE,IAAA,IAAI,EAAEC,eAAS,CAACC,KADlB;AAEE,IAAA,SAAS,EAAEC,gBAAU,CAACC,OAFxB;AAGE,IAAA,KAAK,EAAC,MAHR;AAIE,IAAA,MAAM,EAAC;AAJT,IALF,CADF,CAdF,CADF,eA8BEtT;AAAK,IAAA,SAAS,EAAC;AAAf,IA9BF,CADiB,EAiChBoJ,QAAQ,CAACmK,cAAT,CAAwB5C,UAAxB,CAjCgB,CAAnB;AAkCD;;AAEDoC,KAAK,CAACtS,SAAN,GAAkB;AAChBF,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OADkB,EAE5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAF4B,CAApB,CADM;AAKhB8R,EAAAA,QAAQ,EAAEhS,6BAAS,CAACO,IAAV,CAAeF,UALT;AAMhB0R,EAAAA,QAAQ,EAAE/R,6BAAS,CAACO,IAAV,CAAeF,UANT;AAOhBiS,EAAAA,UAAU,EAAEtS,6BAAS,CAACM,IAPN;AAQhBiP,EAAAA,QAAQ,EAAEvP,6BAAS,CAACM,IARJ;AAShB6C,EAAAA,IAAI,EAAEnD,6BAAS,CAACQ;AATA,CAAlB;AAWA6R,KAAK,CAAC5R,YAAN,GAAqB;AACnBZ,EAAAA,QAAQ,EAAE,IADS;AAEnByS,EAAAA,UAAU,EAAE,KAFO;AAGnB/C,EAAAA,QAAQ,EAAE,KAHS;AAInBpM,EAAAA,IAAI,EAAEiO,WAAW,CAACf;AAJC,CAArB;;IC/HayC,MAAM,GAAG;AACpBlB,EAAAA,cAAc,EAAE,gBADI;AAEpBmB,EAAAA,cAAc,EAAE,gBAFI;AAGpBC,EAAAA,cAAc,EAAE,gBAHI;AAIpBC,EAAAA,cAAc,EAAE,gBAJI;AAKpB9B,EAAAA,WAAW,EAAE,aALO;AAMpBhB,EAAAA,OAAO,EAAE,SANW;AAOpB+C,EAAAA,KAAK,EAAE;AAPa;AAUf,SAASC,sBAAT,CAAgCC,KAAhC,EAAuC;AAC5C,UAAQA,KAAR;AACE,SAAKN,MAAM,CAAClB,cAAZ;AAA4B,aAAO,gCAAP;;AAC5B,SAAKkB,MAAM,CAACC,cAAZ;AAA4B,aAAO,gCAAP;;AAC5B,SAAKD,MAAM,CAACE,cAAZ;AAA4B,aAAO,gCAAP;;AAC5B,SAAKF,MAAM,CAACG,cAAZ;AAA4B,aAAO,gCAAP;;AAC5B,SAAKH,MAAM,CAAC3B,WAAZ;AAAyB,aAAO,6BAAP;;AACzB,SAAK2B,MAAM,CAAC3C,OAAZ;AAAqB,aAAO,yBAAP;;AACrB,SAAK2C,MAAM,CAACI,KAAZ;AAAmB,aAAO,uBAAP;;AACnB;AAAS,aAAO,IAAP;AARX;AAUD;;ACjBc,SAASG,UAAT,OAOZ;AAAA,MANDvT,SAMC,QANDA,SAMC;AAAA,MALDsT,KAKC,QALDA,KAKC;AAAA,MAJD7D,QAIC,QAJDA,QAIC;AAAA,MAHD+D,YAGC,QAHDA,YAGC;AAAA,MAFD5D,OAEC,QAFDA,OAEC;AAAA,MADD7P,QACC,QADDA,QACC;AACD,sBACEP;AACE,IAAA,SAAS,EAAE,iDACLmG,KAAK,CAACC,OAAN,CAAc5F,SAAd,IAA2BA,SAA3B,GAAuC,CAACA,SAAD,CADlC,IAETqT,sBAAsB,CAACC,KAAD,CAFb,EAGTE,YAAY,GAAG,oCAAH,GAA0C,qBAH7C,EAIT/D,QAAQ,GAAG,+BAAH,GAAqC,EAJpC,GAKTxJ,IALS,CAKJ,GALI,CADb;AAOE,IAAA,IAAI,EAAC,QAPP;AAQE,IAAA,QAAQ,EAAE,CARZ;AASE,IAAA,OAAO,EAAE2J,OATX;AAUE,IAAA,UAAU,EAAEA;AAVd,KAYG7P,QAZH,CADF;AAgBD;AAEDwT,UAAU,CAACtT,SAAX,GAAuB;AACrBD,EAAAA,SAAS,EAAEE,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACQ,MADmB,EAE7BR,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACQ,MAA5B,CAF6B,CAApB,CADU;AAKrB4S,EAAAA,KAAK,EAAEpT,6BAAS,CAACQ,MALI;AAMrB+O,EAAAA,QAAQ,EAAEvP,6BAAS,CAACM,IANC;AAOrBgT,EAAAA,YAAY,EAAEtT,6BAAS,CAACM,IAPH;AAQrBoP,EAAAA,OAAO,EAAE1P,6BAAS,CAACO,IARE;AASrBV,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACQ,MADkB,EAE5BR,6BAAS,CAACE,OAFkB,CAApB,EAGPG;AAZkB,CAAvB;AAeAgT,UAAU,CAAC5S,YAAX,GAA0B;AACxBX,EAAAA,SAAS,EAAE,EADa;AAExBsT,EAAAA,KAAK,EAAEN,MAAM,CAAClB,cAFU;AAGxBrC,EAAAA,QAAQ,EAAE,KAHc;AAIxB+D,EAAAA,YAAY,EAAE,KAJU;AAKxB5D,EAAAA,OAAO,EAAE,mBAAM;AALS,CAA1B;;IC9Ca6D,kBAAkB,GAAG;IACrBC,iBAAiB,GAAG;IACpBC,iBAAiB,GAAG;IACpBC,mBAAmB,GAAG;IACtBC,cAAc,GAAG;IACjBC,aAAa,GAAG;IAChBC,cAAc,GAAG;;ICLjBC,MAAM,GAAG,SAATA,MAAS,CAACC,KAAD,EAAW;AAC/B,sBAAwBA,KAAxB,CAAQC,MAAR;AAAA,MAAQA,MAAR,8BAAiB,EAAjB;AACA,yBAA0BA,MAA1B,CAAQC,QAAR;AAAA,MAAQA,QAAR,iCAAmB,EAAnB;AACA,MAAQC,GAAR,GAAgBD,QAAhB,CAAQC,GAAR;AACA,SAAOA,GAAP;AACD;AAEM,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACJ,KAAD,EAAW;AAClC,sBAAwBA,KAAxB,CAAQK,MAAR;AAAA,MAAQA,MAAR,8BAAiB,EAAjB;AACA,MAAQC,MAAR,GAAmBD,MAAnB,CAAQC,MAAR;AACA,SAAOA,MAAP;AACD,CAJM;AAOP;;AACO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACP,KAAD;AAAA,SAAW,UAAC9N,MAAD,EAASsO,WAAT;AAAA,WAAyB,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC7F,UAAMR,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;;AACA,UAAI,CAACG,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACD,UAAI,CAACJ,WAAL,EAAkB;AAChBL,QAAAA,GAAG,CAACU,OAAJ,CAAY3O,MAAZ,EACG4O,IADH,CACQ,UAACC,GAAD;AAAA,iBAASL,OAAO,CAACK,GAAD,CAAhB;AAAA,SADR,EAEGC,KAFH,CAES,UAACC,GAAD;AAAA,iBAASN,MAAM,CAACM,GAAD,CAAf;AAAA,SAFT;AAGD,OAJD,MAIO;AACLd,QAAAA,GAAG,CAACU,OAAJ,CAAY3O,MAAZ,EAAoBsO,WAApB,EACGM,IADH,CACQ,UAACC,GAAD;AAAA,iBAASL,OAAO,CAACK,GAAD,CAAhB;AAAA,SADR,EAEGC,KAFH,CAES,UAACC,GAAD;AAAA,iBAASN,MAAM,CAACM,GAAD,CAAf;AAAA,SAFT;AAGD;AACF,KAd6D,CAAzB;AAAA,GAAX;AAAA,CAAnB;;AAiBA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAClB,KAAD;AAAA,SAAW;AAAA,WAAM,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC7E,UAAMR,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;;AACA,UAAI,CAACG,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACgB,UAAJ,GACGL,IADH,CACQ,UAACC,GAAD;AAAA,eAASL,OAAO,CAACK,GAAD,CAAhB;AAAA,OADR,EAEGC,KAFH,CAES,UAACC,GAAD;AAAA,eAASN,MAAM,CAACM,GAAD,CAAf;AAAA,OAFT;AAGD,KAR6C,CAAN;AAAA,GAAX;AAAA,CAAtB;AAWP;AACA;;AACO,IAAMG,iBAAiB,GAAG,SAApBA,iBAAoB,CAACpB,KAAD;AAAA,SAAW,UAACqB,QAAD,EAAWC,UAAX;AAAA,WAA0B,IAAIb,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACrG,UAAMR,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;;AACA,UAAI,CAACG,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACoB,qBAAJ,CAA0BF,QAA1B,EAAoCC,UAApC,EACGR,IADH,CACQ,UAACC,GAAD;AAAA,eAASL,OAAO,CAACK,GAAD,CAAhB;AAAA,OADR,EAEGC,KAFH,CAES,UAACC,GAAD;AAAA,eAASN,MAAM,CAACM,GAAD,CAAf;AAAA,OAFT;AAGD,KARqE,CAA1B;AAAA,GAAX;AAAA,CAA1B;AAUA,IAAMO,kBAAkB,GAAG,SAArBA,kBAAqB,CAACxB,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAaC,iBAAb,EAAmC;AAC9E,QAAMvB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjB,YAAMiS,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,cAAIC,UAAU,GAAG,IAAjB;AACA,cAAMC,cAAc,GAAG,IAAIvB,OAAJ,CAAY,UAACwB,QAAD,EAAWC,OAAX,EAAuB;AACxDH,YAAAA,UAAU,GAAGlS,OAAO,CAACsS,eAAR,CAAwBT,iBAAxB,EAA2C,UAACX,GAAD,EAAME,GAAN,EAAc;AACpE,kBAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,kBAAIvS,OAAO,GAAGiR,GAAd;AACA,kBAAIuB,KAAK,GAAGrB,GAAZ;;AACA,kBAAImB,UAAJ,EAAgB;AACdtS,gBAAAA,OAAO,GAAGmR,GAAV;AACAqB,gBAAAA,KAAK,GAAGvB,GAAR;AACD;;AACD,kBAAIuB,KAAJ,EAAW;AACTJ,gBAAAA,OAAO,CAACI,KAAD,CAAP;AACA;AACD;;AACDL,cAAAA,QAAQ,CAACnS,OAAD,CAAR;AACA6R,cAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE1S,gBAAAA,OAAO,EAAPA,OADF;AAEED,gBAAAA,OAAO,EAAPA;AAFF,eAFF;AAOD,aApBY,CAAb;AAqBA8R,YAAAA,MAAM,CAACY,OAAP,CACEC,kBADF,EAEE;AACE1S,cAAAA,OAAO,EAAEiS,UADX;AAEElS,cAAAA,OAAO,EAAPA;AAFF,aAFF;AAOD,WA7BsB,CAAvB;;AA8BAmS,UAAAA,cAAc,CAAChP,GAAf,GAAqB;AAAA,mBAAM+O,UAAN;AAAA,WAArB;;AACA,iBAAOC,cAAP;AACD,SAlCD;;AAmCAtB,QAAAA,OAAO,CAACoB,SAAS,EAAV,CAAP;AACD,OAtCH,EAuCGd,KAvCH,CAuCSL,MAvCT;AAwCD,KA5CM,CAAP;AA6CD,GAhDiC;AAAA,CAA3B;AAiDA,IAAM8B,kBAAkB,GAAG,SAArBA,kBAAqB,CAACzC,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAaiB,iBAAb,EAAmC;AAC9E,QAAMvC,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjB,YAAMiS,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,cAAIC,UAAU,GAAG,IAAjB;AACA,cAAMC,cAAc,GAAG,IAAIvB,OAAJ,CAAY,UAACwB,QAAD,EAAWC,OAAX,EAAuB;AACxDH,YAAAA,UAAU,GAAGlS,OAAO,CAAC8S,eAAR,CAAwBD,iBAAxB,EAA2C,UAAC3B,GAAD,EAAME,GAAN,EAAc;AACpE,kBAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,kBAAIvS,OAAO,GAAGiR,GAAd;AACA,kBAAIuB,KAAK,GAAGrB,GAAZ;;AACA,kBAAImB,UAAJ,EAAgB;AACdtS,gBAAAA,OAAO,GAAGmR,GAAV;AACAqB,gBAAAA,KAAK,GAAGvB,GAAR;AACD;;AAED,kBAAIuB,KAAJ,EAAW;AACTJ,gBAAAA,OAAO,CAACI,KAAD,CAAP;AACA;AACD;;AACDL,cAAAA,QAAQ,CAACnS,OAAD,CAAR;AACA6R,cAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE1S,gBAAAA,OAAO,EAAPA,OADF;AAEED,gBAAAA,OAAO,EAAPA;AAFF,eAFF;AAOD,aArBY,CAAb;AAsBD,WAvBsB,CAAvB;;AAwBA,cAAI6S,iBAAiB,CAACE,IAAtB,EAA4B;AAC1B;AACA;AACA;AACAb,YAAAA,UAAU,CAACc,QAAX,GAAsBC,GAAG,CAACC,eAAJ,CAAoBL,iBAAiB,CAACE,IAAtC,CAAtB;AACD;;AACD,cAAIF,iBAAiB,CAACM,OAAtB,EAA+B;AAC7B;AACAjB,YAAAA,UAAU,CAACc,QAAX,GAAsBH,iBAAiB,CAACM,OAAxC;AACD,WAnCqB;;;AAqCtBjB,UAAAA,UAAU,CAACkB,YAAX,GAA0B,SAA1B;AACAtB,UAAAA,MAAM,CAACY,OAAP,CACEC,kBADF,EAEE;AACE1S,YAAAA,OAAO,EAAEiS,UADX;AAEElS,YAAAA,OAAO,EAAPA;AAFF,WAFF;;AAOAmS,UAAAA,cAAc,CAAChP,GAAf,GAAqB;AAAA,mBAAM+O,UAAN;AAAA,WAArB;;AACA,iBAAOC,cAAP;AACD,SA/CD;;AAgDAtB,QAAAA,OAAO,CAACoB,SAAS,EAAV,CAAP;AACD,OAnDH,EAoDGd,KApDH,CAoDSL,MApDT;AAqDD,KAzDM,CAAP;AA0DD,GA7DiC;AAAA,CAA3B;AA8DA,IAAMuC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAClD,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAa0B,SAAb,EAAwBxL,MAAxB,EAAmC;AAChF,QAAMwI,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAACuT,iBAAR,CAA0BD,SAA1B,EAAqCxL,MAArC,EAA6C,UAACoJ,GAAD,EAAME,GAAN,EAAc;AACzD,cAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,cAAIvS,OAAO,GAAGiR,GAAd;AACA,cAAIuB,KAAK,GAAGrB,GAAZ;;AACA,cAAImB,UAAJ,EAAgB;AACdtS,YAAAA,OAAO,GAAGmR,GAAV;AACAqB,YAAAA,KAAK,GAAGvB,GAAR;AACD;;AAED,cAAIuB,KAAJ,EAAW;AACT3B,YAAAA,MAAM,CAAC2B,KAAD,CAAN;AACA;AACD;;AACD5B,UAAAA,OAAO,CAAC5Q,OAAD,CAAP;AACA6R,UAAAA,MAAM,CAACY,OAAP,CACEC,mBADF,EAEE;AACE1S,YAAAA,OAAO,EAAPA,OADF;AAEED,YAAAA,OAAO,EAAPA,OAFF;AAGE;AACA;AACAwT,YAAAA,YAAY,EAAE;AALhB,WAFF;AAUD,SAxBD;AAyBD,OA3BH,EA4BGrC,KA5BH,CA4BSL,MA5BT;AA6BD,KAjCM,CAAP;AAkCD,GArCmC;AAAA,CAA7B;AAsCA,IAAM2C,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACtD,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAa3R,OAAb,EAAyB;AAClE,QAAMqQ,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjB,YAAQsT,SAAR,GAAsBrT,OAAtB,CAAQqT,SAAR;AACAtT,QAAAA,OAAO,CAAC0T,aAAR,CAAsBzT,OAAtB,EAA+B,UAACiR,GAAD,EAAME,GAAN,EAAc;AAC3C,cAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,cAAIC,KAAK,GAAGrB,GAAZ;;AACA,cAAImB,UAAJ,EAAgB;AACdE,YAAAA,KAAK,GAAGvB,GAAR;AACD;;AAED,cAAIuB,KAAJ,EAAW;AACT3B,YAAAA,MAAM,CAAC2B,KAAD,CAAN;AACA;AACD;;AACD5B,UAAAA,OAAO,CAAC5Q,OAAD,CAAP;AACA6R,UAAAA,MAAM,CAACY,OAAP,CACEC,cADF,EAEE;AACEW,YAAAA,SAAS,EAATA,SADF;AAEEtT,YAAAA,OAAO,EAAPA;AAFF,WAFF;AAOD,SAnBD;AAoBD,OAvBH,EAwBGmR,KAxBH,CAwBSL,MAxBT;AAyBD,KA7BM,CAAP;AA8BD,GAjC+B;AAAA,CAAzB;AAmCA,IAAM6C,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACxD,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAagC,aAAb,EAA+B;AAC5E,QAAMtD,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAAC6T,iBAAR,CAA0BD,aAA1B,EACG3C,IADH,CACQ,UAAChR,OAAD,EAAa;AACjB4Q,UAAAA,OAAO,CAAC5Q,OAAD,CAAP;AACA6R,UAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE1S,YAAAA,OAAO,EAAPA,OADF;AAEED,YAAAA,OAAO,EAAPA;AAFF,WAFF;AAOD,SAVH,EAWGmR,KAXH,CAWSL,MAXT;AAYD,OAdH,EAeGK,KAfH,CAeSL,MAfT;AAgBD,KApBM,CAAP;AAqBD,GAxBmC;AAAA,CAA7B;AA0BA,IAAMgD,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAC3D,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAagC,aAAb,EAA+B;AAC5E,QAAMtD,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAAC+T,iBAAR,CAA0BH,aAA1B,EACG3C,IADH,CACQ,UAAChR,OAAD,EAAa;AACjB4Q,UAAAA,OAAO,CAAC5Q,OAAD,CAAP;AACA6R,UAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE1S,YAAAA,OAAO,EAAPA,OADF;AAEED,YAAAA,OAAO,EAAPA;AAFF,WAFF;AAOD,SAVH,EAWGmR,KAXH,CAWSL,MAXT;AAYD,OAdH,EAeGK,KAfH,CAeSL,MAfT;AAgBD,KApBM,CAAP;AAqBD,GAxBmC;AAAA,CAA7B;AA0BA,IAAMkD,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC7D,KAAD;AAAA,SAAW,UAACrI,MAAD,EAAY;AACrD,QAAMwI,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBkC,aAAjB,CAA+BnM,MAA/B,EACGmJ,IADH,CACQ,UAACjR,OAAD,EAAa;AACjB6Q,QAAAA,OAAO,CAAC7Q,OAAD,CAAP;AACA8R,QAAAA,MAAM,CAACY,OAAP,CACEC,cADF,EAEE;AACE3S,UAAAA,OAAO,EAAPA;AADF,SAFF;AAMD,OATH,EAUGmR,KAVH,CAUSL,MAVT;AAWD,KAfM,CAAP;AAgBD,GAnB+B;AAAA,CAAzB;AAqBA,IAAMoD,eAAe,GAAG,SAAlBA,eAAkB,CAAC/D,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAgB;AACxD,QAAMtB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAACmU,KAAR,GACGlD,IADH,CACQ,YAAM;AACVJ,UAAAA,OAAO,CAAC7Q,OAAD,CAAP;AACA8R,UAAAA,MAAM,CAACY,OAAP,CACEC,aADF,EAEE;AACE3S,YAAAA,OAAO,EAAPA;AADF,WAFF;AAMD,SATH,EAUGmR,KAVH,CAUSL,MAVT;AAWD,OAbH,EAcGK,KAdH,CAcSL,MAdT;AAeD,KAnBM,CAAP;AAoBD,GAvB8B;AAAA,CAAxB;AAyBA,IAAMsD,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACjE,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAgB;AACzD,QAAMtB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAACqU,MAAR,GACGpD,IADH,CACQ,YAAM;AACV;AACAJ,UAAAA,OAAO,CAAC7Q,OAAD,CAAP;AACD,SAJH,EAKGmR,KALH,CAKSL,MALT;AAMD,OARH,EASGK,KATH,CASSL,MATT;AAUD,KAdM,CAAP;AAeD,GAjB+B;AAAA,CAAzB;AAmBA,IAAMwD,kBAAkB,GAAG,SAArBA,kBAAqB,CAACnE,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAgB;AAC3D,QAAMtB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAACuU,QAAR,GACGtD,IADH,CACQ,YAAM;AACV;AACAJ,UAAAA,OAAO,CAAC7Q,OAAD,CAAP;AACD,SAJH,EAKGmR,KALH,CAKSL,MALT;AAMD,OARH,EASGK,KATH,CASSL,MATT;AAUD,KAdM,CAAP;AAeD,GAjBiC;AAAA,CAA3B;AAmBA,IAAM0D,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACrE,KAAD;AAAA,SAAW,UAACrI,MAAD,EAAY;AACzD,QAAMwI,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBR,aAAhB,CAA8BnM,MAA9B,EACGmJ,IADH,CACQ,UAACjR,OAAD,EAAa;AACjB6Q,QAAAA,OAAO,CAAC7Q,OAAD,CAAP;AACD,OAHH,EAIGmR,KAJH,CAISL,MAJT;AAKD,KATM,CAAP;AAUD,GAZmC;AAAA,CAA7B;AAaA,IAAM4D,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACvE,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAgB;AACzD,QAAMtB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EAAuC,UAAC+C,WAAD,EAAclC,KAAd,EAAwB;AAC7D,YAAIA,KAAJ,EAAW;AACT3B,UAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU0B,KAAV,CAAD,CAAN;AACA;AACD;;AAEDkC,QAAAA,WAAW,CAACC,KAAZ,CAAkB,UAACC,QAAD,EAAWC,UAAX,EAA0B;AAC1C,cAAIrC,KAAJ,EAAW;AACT3B,YAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU+D,UAAV,CAAD,CAAN;AACA;AACD;;AACDjE,UAAAA,OAAO,CAACgE,QAAD,CAAP;AACD,SAND;AAOD,OAbD;AAcD,KAlBM,CAAP;AAmBD,GArB+B;AAAA,CAAzB;AAuBA,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAAC5E,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAgB;AACxD,QAAMtB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EAAuC,UAAC+C,WAAD,EAAclC,KAAd,EAAwB;AAC7D,YAAIA,KAAJ,EAAW;AACT3B,UAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU0B,KAAV,CAAD,CAAN;AACA;AACD;;AAEDkC,QAAAA,WAAW,CAACK,IAAZ,CAAiB,UAACH,QAAD,EAAWI,SAAX,EAAyB;AACxC,cAAIxC,KAAJ,EAAW;AACT3B,YAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAUkE,SAAV,CAAD,CAAN;AACA;AACD;;AACDpE,UAAAA,OAAO,CAACgE,QAAD,CAAP;AACD,SAND;AAOD,OAbD;AAcD,KAlBM,CAAP;AAmBD,GArB8B;AAAA,CAAxB;AAuBA,IAAMK,6BAA6B,GAAG,SAAhCA,6BAAgC,CAAC/E,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAaC,iBAAb,EAAmC;AACzF,QAAMvB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjB,YAAMiS,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,cAAIC,UAAU,GAAG,IAAjB;AACA,cAAMC,cAAc,GAAG,IAAIvB,OAAJ,CAAY,UAACwB,QAAD,EAAWC,OAAX,EAAuB;AACxDH,YAAAA,UAAU,GAAGlS,OAAO,CAACsS,eAAR,CAAwBT,iBAAxB,EAA2C,UAACX,GAAD,EAAME,GAAN,EAAc;AACpE,kBAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,kBAAIvS,OAAO,GAAGiR,GAAd;AACA,kBAAIuB,KAAK,GAAGrB,GAAZ;;AACA,kBAAImB,UAAJ,EAAgB;AACdtS,gBAAAA,OAAO,GAAGmR,GAAV;AACAqB,gBAAAA,KAAK,GAAGvB,GAAR;AACD;;AACD,kBAAIuB,KAAJ,EAAW;AACTJ,gBAAAA,OAAO,CAACI,KAAD,CAAP;AACA;AACD;;AACDL,cAAAA,QAAQ,CAACnS,OAAD,CAAR;AACA6R,cAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE1S,gBAAAA,OAAO,EAAPA,OADF;AAEED,gBAAAA,OAAO,EAAPA;AAFF,eAFF;AAOD,aApBY,CAAb;AAqBA8R,YAAAA,MAAM,CAACY,OAAP,CACEC,kBADF,EAEE;AACE1S,cAAAA,OAAO,EAAEiS,UADX;AAEElS,cAAAA,OAAO,EAAPA;AAFF,aAFF;AAOD,WA7BsB,CAAvB;;AA8BAmS,UAAAA,cAAc,CAAChP,GAAf,GAAqB;AAAA,mBAAM+O,UAAN;AAAA,WAArB;;AACA,iBAAOC,cAAP;AACD,SAlCD;;AAmCAtB,QAAAA,OAAO,CAACoB,SAAS,EAAV,CAAP;AACD,OAtCH,EAuCGd,KAvCH,CAuCSL,MAvCT;AAwCD,KA5CM,CAAP;AA6CD,GAhD4C;AAAA,CAAtC;AAkDA,IAAMqE,6BAA6B,GAAG,SAAhCA,6BAAgC,CAAChF,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAaiB,iBAAb,EAAmC;AACzF,QAAMvC,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjB,YAAMiS,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,cAAIC,UAAU,GAAG,IAAjB;AACA,cAAMC,cAAc,GAAG,IAAIvB,OAAJ,CAAY,UAACwB,QAAD,EAAWC,OAAX,EAAuB;AACxDH,YAAAA,UAAU,GAAGlS,OAAO,CAAC8S,eAAR,CAAwBD,iBAAxB,EAA2C,UAAC3B,GAAD,EAAME,GAAN,EAAc;AACpE,kBAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,kBAAIvS,OAAO,GAAGiR,GAAd;AACA,kBAAIuB,KAAK,GAAGrB,GAAZ;;AACA,kBAAImB,UAAJ,EAAgB;AACdtS,gBAAAA,OAAO,GAAGmR,GAAV;AACAqB,gBAAAA,KAAK,GAAGvB,GAAR;AACD;;AAED,kBAAIuB,KAAJ,EAAW;AACTJ,gBAAAA,OAAO,CAACI,KAAD,CAAP;AACA;AACD;;AACDL,cAAAA,QAAQ,CAACnS,OAAD,CAAR;AACA6R,cAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE1S,gBAAAA,OAAO,EAAPA,OADF;AAEED,gBAAAA,OAAO,EAAPA;AAFF,eAFF;AAOD,aArBY,CAAb;AAsBD,WAvBsB,CAAvB;;AAwBA,cAAI6S,iBAAiB,CAACE,IAAtB,EAA4B;AAC1B;AACA;AACA;AACAb,YAAAA,UAAU,CAACc,QAAX,GAAsBC,GAAG,CAACC,eAAJ,CAAoBL,iBAAiB,CAACE,IAAtC,CAAtB;AACD;;AACD,cAAIF,iBAAiB,CAACM,OAAtB,EAA+B;AAC7B;AACAjB,YAAAA,UAAU,CAACc,QAAX,GAAsBH,iBAAiB,CAACM,OAAxC;AACD,WAnCqB;;;AAqCtBjB,UAAAA,UAAU,CAACkB,YAAX,GAA0B,SAA1B;AACAtB,UAAAA,MAAM,CAACY,OAAP,CACEC,kBADF,EAEE;AACE1S,YAAAA,OAAO,EAAEiS,UADX;AAEElS,YAAAA,OAAO,EAAPA;AAFF,WAFF;;AAOAmS,UAAAA,cAAc,CAAChP,GAAf,GAAqB;AAAA,mBAAM+O,UAAN;AAAA,WAArB;;AACA,iBAAOC,cAAP;AACD,SA/CD;;AAgDAtB,QAAAA,OAAO,CAACoB,SAAS,EAAV,CAAP;AACD,OAnDH,EAoDGd,KApDH,CAoDSL,MApDT;AAqDD,KAzDM,CAAP;AA0DD,GA7D4C;AAAA,CAAtC;AA+DA,IAAMsE,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACjF,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAa0B,SAAb,EAAwBxL,MAAxB,EAAmC;AAC3F,QAAMwI,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAACuT,iBAAR,CAA0BD,SAA1B,EAAqCxL,MAArC,EAA6C,UAACoJ,GAAD,EAAME,GAAN,EAAc;AACzD,cAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,cAAIvS,OAAO,GAAGiR,GAAd;AACA,cAAIuB,KAAK,GAAGrB,GAAZ;;AACA,cAAImB,UAAJ,EAAgB;AACdtS,YAAAA,OAAO,GAAGmR,GAAV;AACAqB,YAAAA,KAAK,GAAGvB,GAAR;AACD;;AAED,cAAIuB,KAAJ,EAAW;AACT3B,YAAAA,MAAM,CAAC2B,KAAD,CAAN;AACA;AACD;;AACD5B,UAAAA,OAAO,CAAC5Q,OAAD,CAAP;AACA6R,UAAAA,MAAM,CAACY,OAAP,CACEC,mBADF,EAEE;AACE1S,YAAAA,OAAO,EAAPA,OADF;AAEED,YAAAA,OAAO,EAAPA,OAFF;AAGE;AACA;AACAwT,YAAAA,YAAY,EAAE;AALhB,WAFF;AAUD,SAxBD;AAyBD,OA3BH,EA4BGrC,KA5BH,CA4BSL,MA5BT;AA6BD,KAjCM,CAAP;AAkCD,GArC8C;AAAA,CAAxC;AAuCA,IAAMuE,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAClF,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAa3R,OAAb,EAAyB;AAC7E,QAAMqQ,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjB,YAAQsT,SAAR,GAAsBrT,OAAtB,CAAQqT,SAAR;AACAtT,QAAAA,OAAO,CAAC0T,aAAR,CAAsBzT,OAAtB,EAA+B,UAACiR,GAAD,EAAME,GAAN,EAAc;AAC3C,cAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,cAAIC,KAAK,GAAGrB,GAAZ;;AACA,cAAImB,UAAJ,EAAgB;AACdE,YAAAA,KAAK,GAAGvB,GAAR;AACD;;AAED,cAAIuB,KAAJ,EAAW;AACT3B,YAAAA,MAAM,CAAC2B,KAAD,CAAN;AACA;AACD;;AACD5B,UAAAA,OAAO,CAAC5Q,OAAD,CAAP;AACA6R,UAAAA,MAAM,CAACY,OAAP,CACEC,cADF,EAEE;AACEW,YAAAA,SAAS,EAATA,SADF;AAEEtT,YAAAA,OAAO,EAAPA;AAFF,WAFF;AAOD,SAnBD;AAoBD,OAvBH,EAwBGmR,KAxBH,CAwBSL,MAxBT;AAyBD,KA7BM,CAAP;AA8BD,GAjC0C;AAAA,CAApC;AAmCA,IAAMwE,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACnF,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAagC,aAAb,EAA+B;AACvF,QAAMtD,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAAC6T,iBAAR,CAA0BD,aAA1B,EACG3C,IADH,CACQ,UAAChR,OAAD,EAAa;AACjB4Q,UAAAA,OAAO,CAAC5Q,OAAD,CAAP;AACA6R,UAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE1S,YAAAA,OAAO,EAAPA,OADF;AAEED,YAAAA,OAAO,EAAPA;AAFF,WAFF;AAOD,SAVH,EAWGmR,KAXH,CAWSL,MAXT;AAYD,OAdH,EAeGK,KAfH,CAeSL,MAfT;AAgBD,KApBM,CAAP;AAqBD,GAxB8C;AAAA,CAAxC;AA0BA,IAAMyE,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACpF,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAagC,aAAb,EAA+B;AACvF,QAAMtD,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EACGX,IADH,CACQ,UAACjR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAAC+T,iBAAR,CAA0BH,aAA1B,EACG3C,IADH,CACQ,UAAChR,OAAD,EAAa;AACjB4Q,UAAAA,OAAO,CAAC5Q,OAAD,CAAP;AACA6R,UAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE1S,YAAAA,OAAO,EAAPA,OADF;AAEED,YAAAA,OAAO,EAAPA;AAFF,WAFF;AAOD,SAVH,EAWGmR,KAXH,CAWSL,MAXT;AAYD,OAdH,EAeGK,KAfH,CAeSL,MAfT;AAgBD,KApBM,CAAP;AAqBD,GAxB8C;AAAA,CAAxC;AA0BP,gBAAe;AACbZ,EAAAA,MAAM,EAANA,MADa;AAEbQ,EAAAA,UAAU,EAAVA,UAFa;AAGbW,EAAAA,aAAa,EAAbA,aAHa;AAIbE,EAAAA,iBAAiB,EAAjBA,iBAJa;AAKbI,EAAAA,kBAAkB,EAAlBA,kBALa;AAMbiB,EAAAA,kBAAkB,EAAlBA,kBANa;AAObS,EAAAA,oBAAoB,EAApBA,oBAPa;AAQbI,EAAAA,gBAAgB,EAAhBA,gBARa;AASbE,EAAAA,oBAAoB,EAApBA,oBATa;AAUbG,EAAAA,oBAAoB,EAApBA,oBAVa;AAWbM,EAAAA,gBAAgB,EAAhBA,gBAXa;AAYbE,EAAAA,kBAAkB,EAAlBA,kBAZa;AAabN,EAAAA,gBAAgB,EAAhBA,gBAba;AAcbE,EAAAA,eAAe,EAAfA,eAda;AAebM,EAAAA,oBAAoB,EAApBA,oBAfa;AAgBbgB,EAAAA,mBAAmB,EAAEd,gBAhBR;AAiBbe,EAAAA,kBAAkB,EAAEV,eAjBP;AAkBbG,EAAAA,6BAA6B,EAA7BA,6BAlBa;AAmBbC,EAAAA,6BAA6B,EAA7BA,6BAnBa;AAoBbC,EAAAA,+BAA+B,EAA/BA,+BApBa;AAqBbC,EAAAA,2BAA2B,EAA3BA,2BArBa;AAsBbC,EAAAA,+BAA+B,EAA/BA,+BAtBa;AAuBbC,EAAAA,+BAA+B,EAA/BA;AAvBa,CAAf;;AC1oBA,SAASG,WAAT,CAAqBC,EAArB;MACE/O,IAAI;MACJwB,aAAa;MACbkI,GAAG;MACHsF,MAAM;MACNC;MAAAC,gBAAgB,mBAAG;MACnB7B,aAAa;MACb8B,SAAS;AAED,MAAAnT,SAAS,GAAK0L,gBAAU,CAACC,uCAAD,CAAV,UAAd;AACR,sBACE7S;AAAK,IAAA,SAAS,EAAC;AAAf,kBACEA;AAAS,IAAA,SAAS,EAAC;AAAnB,kBACEA,wCAACsa,YAAD;AACE,IAAA,MAAM,EAAC,MADT;AAEE,IAAA,KAAK,EAAC,MAFR;AAGE,IAAA,GAAG,EAAEpP,IAAI,CAAC6K;AAHZ,IADF,CADF,eAQE/V;AAAS,IAAA,SAAS,EAAC;AAAnB,kBACEA,wCAACyR,WAAD;AACE,IAAA,IAAI,EAAEC,qBAAe,CAAC6I,GADxB;AAEE,IAAA,KAAK,EAAE3I,iBAAW,CAACU;AAFrB,KAIGpH,IAAI,CAACE,QAAL,IAAiBlE,SAAS,CAACsT,OAJ9B,CADF,CARF,EAiBKtP,IAAI,CAACvE,MAAL,KAAgB+F,aAAjB,IAAmC,CAAC0N,gBAApC,iBACEpa;AAAS,IAAA,SAAS,EAAC;AAAnB,kBACEA,wCAAC,MAAD;AACE,IAAA,IAAI,EAAE8R,WAAW,CAAChB,SADpB;AAEE,IAAA,OAAO,EAAE;AACP,UAAM1E,MAAM,GAAG,IAAIwI,GAAG,CAAC6F,kBAAR,EAAf;AACArO,MAAAA,MAAM,CAACsO,UAAP,GAAoB,IAApB;AACAtO,MAAAA,MAAM,CAACuO,UAAP,CAAkB,CAACzP,IAAI,CAACvE,MAAN,CAAlB;AACA0T,MAAAA,SAAS;AACT9B,MAAAA,aAAa,CAACnM,MAAD,CAAb,CACGmJ,IADH,CACQ,UAACqF,YAAD;AACJV,QAAAA,MAAM,CAACW,IAAP,CAAY,6BAAZ,EAA2CD,YAA3C;AACD,OAHH;AAID;AAXH,KAaG1T,SAAS,CAAC4T,qBAbb,CADF,CAlBN,eAqCE9a;AAAK,IAAA,SAAS,EAAC;AAAf,IArCF,eAsCEA;AAAS,IAAA,SAAS,EAAC;AAAnB,kBACEA,wCAACyR,WAAD;AACE,IAAA,SAAS,EAAC,sCADZ;AAEE,IAAA,IAAI,EAAEC,qBAAe,CAACqJ,SAFxB;AAGE,IAAA,KAAK,EAAEnJ,iBAAW,CAAC6B;AAHrB,KAKGvM,SAAS,CAAC8T,qBALb,CADF,eAQEhb,wCAACyR,WAAD;AACE,IAAA,SAAS,EAAC,sCADZ;AAEE,IAAA,IAAI,EAAEC,qBAAe,CAACuJ,MAFxB;AAGE,IAAA,KAAK,EAAErJ,iBAAW,CAACU;AAHrB,KAKGpH,IAAI,CAACvE,MALR,CARF,CAtCF,CADF;AAyDD;;AAED,IAAMuU,eAAe,GAAG,SAAlBA,eAAkB,CAACzG,KAAD;AAAW,SAAC;AAClCG,IAAAA,GAAG,EAAEJ,MAAM,CAACC,KAAD,CADuB;AAElC8D,IAAAA,aAAa,EAAED,gBAAgB,CAAC7D,KAAD,CAFG;AAGlCyF,IAAAA,MAAM,EAAEzF,KAAK,CAACK,MAAN,CAAaoF,MAHa;AAIlC9D,IAAAA,MAAM,EAAE3B,KAAK,CAACK,MAAN,CAAaC;AAJa,GAAD;AAKjC,CALF;;IAOMoG,oBAAoB,GAAGC,uCAAmB,CAACpB,WAAD,EAAckB,eAAd;;ICjG3BG;;;;;AACnB,qBAAY/a,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,yGAoBN,YAAM;AACjB,kCAAkC,MAAKA,KAAvC,CAAQgb,gBAAR;AAAA,UAAQA,gBAAR,sCAA2B,EAA3B;AACA,UAAQC,OAAR,GAAoBD,gBAApB,CAAQC,OAAR;;AACA,UAAID,gBAAgB,IAAIC,OAAxB,EAAiC;AAC/BA,QAAAA,OAAO,CAACC,SAAR,CAAkBC,GAAlB,CAAsB,wBAAtB;AACD;AACF,KA1BkB;;AAAA,yGA4BN,YAAM;AACjB,mCAAkC,MAAKnb,KAAvC,CAAQgb,gBAAR;AAAA,UAAQA,gBAAR,uCAA2B,EAA3B;AACA,UAAQC,OAAR,GAAoBD,gBAApB,CAAQC,OAAR;;AACA,UAAID,gBAAgB,IAAIC,OAAxB,EAAiC;AAC/BA,QAAAA,OAAO,CAACC,SAAR,CAAkBE,MAAlB,CAAyB,wBAAzB;AACD;AACF,KAlCkB;;AAAA,0GAoCL,YAAM;AAClB,UAAQC,aAAR,GAA0B,MAAKrb,KAA/B,CAAQqb,aAAR;;AACA;AAAA,UAAQC,OAAR,yBAAQA,OAAR;;AACA,UAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAW;AACpC,YAAIF,OAAO,CAACL,OAAR,IAAmB,CAACK,OAAO,CAACL,OAAR,CAAgBQ,QAAhB,CAAyBD,KAAK,CAACE,MAA/B,CAAxB,EAAgE;AAC9DL,UAAAA,aAAa;AACd;AACF,OAJD;;AAKA,YAAKM,QAAL,CAAc;AACZJ,QAAAA,kBAAkB,EAAlBA;AADY,OAAd;;AAIAzS,MAAAA,QAAQ,CAAC8S,gBAAT,CAA0B,WAA1B,EAAuCL,kBAAvC;AACD,KAjDkB;;AAAA,4GAmDH,YAAM;AACpB,UACEA,kBADF,GAEI,MAAK7W,KAFT,CACE6W,kBADF;AAGAzS,MAAAA,QAAQ,CAAC+S,mBAAT,CAA6B,WAA7B,EAA0CN,kBAA1C;AACD,KAxDkB;;AAAA,8GA0DD,YAAM;AACtB,wBAAgC,MAAKvb,KAArC;AAAA,UAAQ8b,SAAR,eAAQA,SAAR;AAAA,UAAmBC,QAAnB,eAAmBA,QAAnB;AACA,UAAMC,UAAU,GAAGF,SAAS,CAACb,OAAV,CAAkBgB,qBAAlB,EAAnB;AACA,UAAMC,CAAC,GAAGF,UAAU,CAACE,CAAX,IAAgBF,UAAU,CAACG,IAArC;AACA,UAAMC,CAAC,GAAGJ,UAAU,CAACI,CAAX,IAAgBJ,UAAU,CAACK,GAArC;AACA,UAAMC,SAAS,GAAG;AAChBD,QAAAA,GAAG,EAAED,CADW;AAEhBD,QAAAA,IAAI,EAAED;AAFU,OAAlB;AAKA,UAAI,CAAC,MAAKZ,OAAL,CAAaL,OAAlB,EAA2B,OAAOqB,SAAP;AAE3B,oBAAoC3T,MAApC;AAAA,UAAQ4T,UAAR,WAAQA,UAAR;AAAA,UAAoBC,WAApB,WAAoBA,WAApB;;AACA,UAAMC,IAAI,GAAG,MAAKnB,OAAL,CAAaL,OAAb,CAAqBgB,qBAArB,EAAb;;AACA,UAAIG,CAAC,GAAGK,IAAI,CAAC5M,MAAT,GAAkB2M,WAAtB,EAAmC;AACjCF,QAAAA,SAAS,CAACD,GAAV,IAAiBI,IAAI,CAAC5M,MAAtB;AACD;;AAED,UAAIqM,CAAC,GAAGO,IAAI,CAAC7M,KAAT,GAAiB2M,UAAjB,IAA+B,CAACR,QAApC,EAA8C;AAC5CO,QAAAA,SAAS,CAACH,IAAV,IAAkBM,IAAI,CAAC7M,KAAvB;AACD;;AAED,UAAI0M,SAAS,CAACD,GAAV,GAAgB,CAApB,EAAuB;AACrBC,QAAAA,SAAS,CAACD,GAAV,GAAgBI,IAAI,CAAC5M,MAAL,GAAc2M,WAAd,GAA4B,CAACA,WAAW,GAAGC,IAAI,CAAC5M,MAApB,IAA8B,CAA1D,GAA8D,CAA9E;AACD;;AAED,UAAIyM,SAAS,CAACH,IAAV,GAAiB,CAArB,EAAwB;AACtBG,QAAAA,SAAS,CAACH,IAAV,GAAiBM,IAAI,CAAC7M,KAAL,GAAa2M,UAAb,GAA0B,CAACA,UAAU,GAAGE,IAAI,CAAC7M,KAAnB,IAA4B,CAAtD,GAA0D,CAA3E;AACD;;AAED0M,MAAAA,SAAS,CAACD,GAAV,IAAiB,EAAjB;;AACA,UAAIN,QAAJ,EAAc;AACZ,YAAMW,OAAO,GAAGC,MAAM,CAACC,KAAP,CAAaH,IAAI,CAAC7M,KAAL,GAAa,EAA1B,IACZ,GADY;AAAA,UAEZ6M,IAAI,CAAC7M,KAAL,GAAa,EAFjB;AAGA0M,QAAAA,SAAS,CAACH,IAAV,IAAkBO,OAAlB;AACD;;AAED,aAAO,MAAKf,QAAL,CAAc;AAAEW,QAAAA,SAAS,EAATA;AAAF,OAAd,CAAP;AACD,KAjGkB;;AAEjB,UAAKhB,OAAL,gBAAe5b,yBAAK,CAACmd,SAAN,EAAf;AACA,UAAKnY,KAAL,GAAa;AACX4X,MAAAA,SAAS,EAAE,EADA;AAEXf,MAAAA,kBAAkB,EAAE,8BAAM;AAFf,KAAb;AAHiB;AAOlB;;;;WAED,6BAAoB;AAClB,WAAKuB,WAAL;AACA,WAAKC,eAAL;AACA,WAAKC,UAAL;AACD;;;WAED,gCAAuB;AACrB,WAAKC,aAAL;AACA,WAAKC,UAAL;AACD;;;WAiFD,kBAAS;AACP,UAAQZ,SAAR,GAAsB,KAAK5X,KAA3B,CAAQ4X,SAAR;AACA,yBAA4B,KAAKtc,KAAjC;AAAA,UAAQC,QAAR,gBAAQA,QAAR;AAAA,UAAkBkJ,KAAlB,gBAAkBA,KAAlB;AACA,0BACEwJ,qBAAY,eAERjT,+FACEA;AAAK,QAAA,SAAS,EAAC;AAAf,QADF,eAEEA;AACE,QAAA,SAAS,EAAC,yBADZ;AAEE,QAAA,GAAG,EAAE,KAAK4b,OAFZ;AAGE,QAAA,KAAK;AACH6B,UAAAA,OAAO,EAAE,cADN;AAEH/T,UAAAA,QAAQ,EAAE,OAFP;AAGH+S,UAAAA,IAAI,YAAK9T,IAAI,CAAC+U,KAAL,CAAWd,SAAS,CAACH,IAArB,CAAL,OAHD;AAIHE,UAAAA,GAAG,YAAKhU,IAAI,CAAC+U,KAAL,CAAWd,SAAS,CAACD,GAArB,CAAL;AAJA,WAKAlT,KALA;AAHP,SAWGlJ,QAXH,CAFF,CAFQ,EAmBV6I,QAAQ,CAACmK,cAAT,CAAwB,0BAAxB,CAnBU,CADd;AAuBD;;;;EA9HoCoK;AAgIvCtC,WAAS,CAAC5a,SAAV,GAAsB;AACpBkb,EAAAA,aAAa,EAAEjb,6BAAS,CAACO,IAAV,CAAeF,UADV;AAEpBR,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OADkB,EAE5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAF4B,CAApB,EAGPG,UALiB;AAMpB0I,EAAAA,KAAK,EAAE/I,6BAAS,CAACgQ,KAAV,CAAgB,EAAhB,CANa;AAOpB;AACA0L,EAAAA,SAAS,EAAE1b,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACO,IADmB,EAE7BP,6BAAS,CAACgQ,KAAV,CAAgB;AAAE6K,IAAAA,OAAO,EAAE7a,6BAAS,CAACkd,UAAV,CAAqBC,OAArB;AAAX,GAAhB,CAF6B,CAApB,EAGR9c,UAXiB;AAYpBua,EAAAA,gBAAgB,EAAE5a,6BAAS,CAACC,SAAV,CAAoB,CACpCD,6BAAS,CAACO,IAD0B,EAEpCP,6BAAS,CAACgQ,KAAV,CAAgB;AAAE6K,IAAAA,OAAO,EAAE7a,6BAAS,CAACkd,UAAV,CAAqBC,OAArB;AAAX,GAAhB,CAFoC,CAApB,EAGf9c,UAfiB;AAgBpBsb,EAAAA,QAAQ,EAAE3b,6BAAS,CAACM;AAhBA,CAAtB;AAkBAqa,WAAS,CAACla,YAAV,GAAyB;AACvBsI,EAAAA,KAAK,EAAE,EADgB;AAEvB4S,EAAAA,QAAQ,EAAE;AAFa,CAAzB;;ACjJA,IAAMyB,kBAAkB,GAAG,sBAA3B;AACe,SAASC,SAAT,OAMZ;AAAA,MALDvd,SAKC,QALDA,SAKC;AAAA,MAJDwd,YAIC,QAJDA,YAIC;AAAA,MAHDC,SAGC,QAHDA,SAGC;AAAA,MAFDC,UAEC,QAFDA,UAEC;AAAA,MADD3d,QACC,QADDA,QACC;;AACD,MAAIA,QAAQ,CAAC6G,MAAT,GAAkB4W,YAAtB,EAAoC;AAClC,QAAMG,MAAM,GAAG,EAAf;;AAEA,SAAK,IAAInS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzL,QAAQ,CAAC6G,MAA7B,EAAqC4E,CAAC,IAAIgS,YAA1C,EAAwD;AACtDG,MAAAA,MAAM,CAAC9X,IAAP,eACErG;AACE,QAAA,SAAS,EAAE,iDACLmG,KAAK,CAACC,OAAN,CAAc5F,SAAd,IAA2BA,SAA3B,GAAuC,CAACA,SAAD,CADlC,IAETsd,kBAFS,GAGTrX,IAHS,CAGJ,GAHI,CADb;AAKE,QAAA,GAAG,EAAEjG,SAAS,GAAGwL,CALnB;AAME,QAAA,KAAK,EAAE;AACLkE,UAAAA,KAAK,EAAE+N,SAAS,GAAGD,YADd;AAEL7N,UAAAA,MAAM,EAAE+N;AAFH;AANT,SAYI3d,QAAQ,CAACiP,KAAT,CAAexD,CAAf,EAAkBA,CAAC,GAAGgS,YAAtB,CAZJ,CADF;AAiBD;;AACD,WAAOG,MAAP;AACD;;AAED,sBACEne;AACE,IAAA,SAAS,EAAE,iDACLmG,KAAK,CAACC,OAAN,CAAc5F,SAAd,IAA2BA,SAA3B,GAAuC,CAACA,SAAD,CADlC,IAETsd,kBAFS,GAGTrX,IAHS,CAGJ,GAHI,CADb;AAKE,IAAA,KAAK,EAAE;AACLyJ,MAAAA,KAAK,EAAE+N,SAAS,GAAG1d,QAAQ,CAAC6G,MADvB;AAEL+I,MAAAA,MAAM,EAAE+N;AAFH;AALT,KAUG3d,QAVH,CADF;AAcD;AAEDwd,SAAS,CAACtd,SAAV,GAAsB;AACpBD,EAAAA,SAAS,EAAEE,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACQ,MADmB,EAE7BR,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACQ,MAA5B,CAF6B,CAApB,CADS;AAKpB8c,EAAAA,YAAY,EAAEtd,6BAAS,CAAC2O,MAAV,CAAiBtO,UALX;AAMpBkd,EAAAA,SAAS,EAAEvd,6BAAS,CAAC2O,MAAV,CAAiBtO,UANR;AAOpBmd,EAAAA,UAAU,EAAExd,6BAAS,CAAC2O,MAAV,CAAiBtO,UAPT;AAQpBR,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OADkB,EAE5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAF4B,EAG5BF,6BAAS,CAACQ,MAHkB,EAI5BR,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACQ,MAA5B,CAJ4B,CAApB,EAKPH;AAbiB,CAAtB;AAgBAgd,SAAS,CAAC5c,YAAV,GAAyB;AACvBX,EAAAA,SAAS,EAAE;AADY,CAAzB;;IChEqB4d;;;;;AACnB,0BAAY9d,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,yGAoBN,YAAM;AACjB,kCAAkC,MAAKA,KAAvC,CAAQgb,gBAAR;AAAA,UAAQA,gBAAR,sCAA2B,EAA3B;AACA,UAAQC,OAAR,GAAoBD,gBAApB,CAAQC,OAAR;;AACA,UAAID,gBAAgB,IAAIC,OAAxB,EAAiC;AAC/BA,QAAAA,OAAO,CAACC,SAAR,CAAkBC,GAAlB,CAAsB,6BAAtB;AACD;AACF,KA1BkB;;AAAA,yGA4BN,YAAM;AACjB,mCAAkC,MAAKnb,KAAvC,CAAQgb,gBAAR;AAAA,UAAQA,gBAAR,uCAA2B,EAA3B;AACA,UAAQC,OAAR,GAAoBD,gBAApB,CAAQC,OAAR;;AACA,UAAID,gBAAgB,IAAIC,OAAxB,EAAiC;AAC/BA,QAAAA,OAAO,CAACC,SAAR,CAAkBE,MAAlB,CAAyB,6BAAzB;AACD;AACF,KAlCkB;;AAAA,0GAoCL,YAAM;AAClB,UAAQC,aAAR,GAA0B,MAAKrb,KAA/B,CAAQqb,aAAR;;AACA;AAAA,UAAQ0C,WAAR,yBAAQA,WAAR;;AACA,UAAMxC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAW;AACpC,YAAIuC,WAAW,CAAC9C,OAAZ,IAAuB,CAAC8C,WAAW,CAAC9C,OAAZ,CAAoBQ,QAApB,CAA6BD,KAAK,CAACE,MAAnC,CAA5B,EAAwE;AACtEL,UAAAA,aAAa;AACd;AACF,OAJD;;AAKA,YAAKM,QAAL,CAAc;AACZJ,QAAAA,kBAAkB,EAAlBA;AADY,OAAd;;AAGAzS,MAAAA,QAAQ,CAAC8S,gBAAT,CAA0B,WAA1B,EAAuCL,kBAAvC;AACD,KAhDkB;;AAAA,4GAkDH,YAAM;AACpB,UACEA,kBADF,GAEI,MAAK7W,KAFT,CACE6W,kBADF;AAGAzS,MAAAA,QAAQ,CAAC+S,mBAAT,CAA6B,WAA7B,EAA0CN,kBAA1C;AACD,KAvDkB;;AAAA,6GAyDF,YAAM;AACrB;AACA,wBAGI,MAAKvb,KAHT;AAAA,UACE8b,SADF,eACEA,SADF;AAAA,UAEEkC,gBAFF,eAEEA,gBAFF;AAIA,UAAMC,iBAAiB,GAAGD,gBAAgB,CAAC9B,CAAjB,IAAsB,CAAhD;AACA,UAAMgC,iBAAiB,GAAGF,gBAAgB,CAAC5B,CAAjB,IAAsB,CAAhD;AAEA,UAAMJ,UAAU,GAAGF,SAAS,CAACb,OAAV,CAAkBgB,qBAAlB,EAAnB;AAEA,UAAMC,CAAC,GAAGF,UAAU,CAACE,CAAX,IAAgBF,UAAU,CAACG,IAArC;AACA,UAAMC,CAAC,GAAGJ,UAAU,CAACI,CAAX,IAAgBJ,UAAU,CAACK,GAArC;AAEA,UAAM8B,aAAa,GAAG;AACpB9B,QAAAA,GAAG,EAAED,CADe;AAEpBD,QAAAA,IAAI,EAAED;AAFc,OAAtB;AAKA,UAAI,CAAC,MAAK6B,WAAL,CAAiB9C,OAAtB,EAA+B,OAAOkD,aAAP;;AAC/B,UAAM1B,IAAI,GAAG,MAAKsB,WAAL,CAAiB9C,OAAjB,CAAyBgB,qBAAzB,EAAb;;AAEA,UAAIkC,aAAa,CAAC9B,GAAd,GAAoBI,IAAI,CAAC5M,MAA7B,EAAqC;AACnCsO,QAAAA,aAAa,CAAC9B,GAAd,IAAqBL,UAAU,CAACnM,MAAhC;AACAsO,QAAAA,aAAa,CAAC9B,GAAd,IAAqB6B,iBAArB;AACD,OAHD,MAGO;AACLC,QAAAA,aAAa,CAAC9B,GAAd,IAAqBI,IAAI,CAAC5M,MAA1B;AACAsO,QAAAA,aAAa,CAAC9B,GAAd,IAAqB6B,iBAArB;AACD;;AAEDC,MAAAA,aAAa,CAAChC,IAAd,IAAuBM,IAAI,CAAC7M,KAAL,GAAa,CAApC;AACAuO,MAAAA,aAAa,CAAChC,IAAd,IAAuBH,UAAU,CAACnM,MAAX,GAAoB,CAArB,GAA0B,CAAhD;AACAsO,MAAAA,aAAa,CAAChC,IAAd,IAAsB8B,iBAAtB;AAEA,UAAMG,WAAW,GAAIzV,MAAM,CAAC4T,UAAP,GAAoBE,IAAI,CAAC7M,KAA9C;;AACA,UAAIwO,WAAW,GAAGD,aAAa,CAAChC,IAAhC,EAAsC;AACpCgC,QAAAA,aAAa,CAAChC,IAAd,GAAqBiC,WAArB;AACD;;AACD,UAAID,aAAa,CAAChC,IAAd,GAAqB,CAAzB,EAA4B;AAC1BgC,QAAAA,aAAa,CAAChC,IAAd,GAAqB,CAArB;AACD;;AAED,aAAO,MAAKR,QAAL,CAAc;AAAEwC,QAAAA,aAAa,EAAbA;AAAF,OAAd,CAAP;AACD,KApGkB;;AAEjB,UAAKJ,WAAL,gBAAmBre,yBAAK,CAACmd,SAAN,EAAnB;AACA,UAAKnY,KAAL,GAAa;AACXyZ,MAAAA,aAAa,EAAE,EADJ;AAEX5C,MAAAA,kBAAkB,EAAE,8BAAM;AAFf,KAAb;AAHiB;AAOlB;;;;WAED,6BAAoB;AAClB,WAAKuB,WAAL;AACA,WAAKuB,cAAL;AACA,WAAKrB,UAAL;AACD;;;WAED,gCAAuB;AACrB,WAAKC,aAAL;AACA,WAAKC,UAAL;AACD;;;WAoFD,kBAAS;AACP,UAAQiB,aAAR,GAA0B,KAAKzZ,KAA/B,CAAQyZ,aAAR;AACA,UAAQle,QAAR,GAAqB,KAAKD,KAA1B,CAAQC,QAAR;AACA,0BACE0S,qBAAY,eACVjT,+FACEA;AAAK,QAAA,SAAS,EAAC;AAAf,QADF,eAEEA;AACE,QAAA,SAAS,EAAC,iCADZ;AAEE,QAAA,GAAG,EAAE,KAAKqe,WAFZ;AAGE,QAAA,KAAK,EAAE;AACLZ,UAAAA,OAAO,EAAE,cADJ;AAEL/T,UAAAA,QAAQ,EAAE,OAFL;AAGL+S,UAAAA,IAAI,YAAK9T,IAAI,CAAC+U,KAAL,CAAWe,aAAa,CAAChC,IAAzB,CAAL,OAHC;AAILE,UAAAA,GAAG,YAAKhU,IAAI,CAAC+U,KAAL,CAAWe,aAAa,CAAC9B,GAAzB,CAAL;AAJE;AAHT,sBAUE3c,wCAAC,SAAD;AACE,QAAA,SAAS,EAAC,sCADZ;AAEE,QAAA,YAAY,EAAE,CAFhB;AAGE,QAAA,SAAS,EAAE,EAHb;AAIE,QAAA,UAAU,EAAE;AAJd,SAMGO,QANH,CAVF,CAFF,CADU,EAuBV6I,QAAQ,CAACmK,cAAT,CAAwB,4BAAxB,CAvBU,CADd;AA2BD;;;;EArIyCoK;AAuI5CS,gBAAc,CAAC3d,SAAf,GAA2B;AACzBkb,EAAAA,aAAa,EAAEjb,6BAAS,CAACO,IAAV,CAAeF,UADL;AAEzBR,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OADkB,EAE5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAF4B,CAApB,EAGPG,UALsB;AAMzBqb,EAAAA,SAAS,EAAE1b,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACO,IADmB,EAE7BP,6BAAS,CAACgQ,KAAV,CAAgB;AAAE6K,IAAAA,OAAO,EAAE7a,6BAAS,CAACkd,UAAV,CAAqBC,OAArB;AAAX,GAAhB,CAF6B,CAApB,EAGR9c,UATsB;AAUzBua,EAAAA,gBAAgB,EAAE5a,6BAAS,CAACC,SAAV,CAAoB,CACpCD,6BAAS,CAACO,IAD0B,EAEpCP,6BAAS,CAACgQ,KAAV,CAAgB;AAAE6K,IAAAA,OAAO,EAAE7a,6BAAS,CAACkd,UAAV,CAAqBC,OAArB;AAAX,GAAhB,CAFoC,CAApB,EAGf9c,UAbsB;AAczBud,EAAAA,gBAAgB,EAAE5d,6BAAS,CAACgQ,KAAV,CAAgB;AAChC8L,IAAAA,CAAC,EAAE9b,6BAAS,CAAC2O,MADmB;AAEhCqN,IAAAA,CAAC,EAAEhc,6BAAS,CAAC2O;AAFmB,GAAhB;AAdO,CAA3B;AAmBA+O,gBAAc,CAACjd,YAAf,GAA8B;AAC5Bmd,EAAAA,gBAAgB,EAAE;AADU,CAA9B;;ACrJA,IAAMM,KAAK,GAAG,EAAd;IAEavD,SAAS,GAAGwD;IACZT,cAAc,GAAGU;IAEjBC,QAAQ,GAAG,SAAXA,QAAW,OAKlB;AAAA,MAJJve,SAII,QAJJA,SAII;AAAA,MAHJD,QAGI,QAHJA,QAGI;AAAA,MAFJ6P,OAEI,QAFJA,OAEI;AAAA,MADJ4O,OACI,QADJA,OACI;;AACJ,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACxO,CAAD,EAAO;AAAE,QAAI,CAACuO,OAAL,EAAc5O,OAAO,CAACK,CAAD,CAAP;AAAa,GAA7D;;AACA,sBACEzQ;AACE,IAAA,SAAS,EAAEsG,YAAY,CAAC,CAAC9F,SAAD,EAAY,8BAAZ,EAA4Cwe,OAAO,GAAG,SAAH,GAAe,EAAlE,CAAD,CADzB;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,OAAO,EAAEC,gBAHX;AAIE,IAAA,UAAU,EAAE,oBAACxO,CAAD,EAAO;AAAE,UAAIA,CAAC,CAACyO,OAAF,KAAcN,KAAlB,EAAyBK,gBAAgB,CAACxO,CAAD,CAAhB;AAAsB,KAJtE;AAKE,IAAA,QAAQ,EAAE;AALZ,kBAOEzQ,wCAACyR,WAAD;AACE,IAAA,SAAS,EAAC,oCADZ;AAEE,IAAA,IAAI,EAAEC,qBAAe,CAACyN,UAFxB;AAGE,IAAA,KAAK,EAAEH,OAAO,GAAGpN,iBAAW,CAAC+B,cAAf,GAAgC/B,iBAAW,CAACU;AAH5D,KAKG/R,QALH,CAPF,CADF;AAiBD;AAEDwe,QAAQ,CAACte,SAAT,GAAqB;AACnBD,EAAAA,SAAS,EAAEE,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACQ,MADmB,EAE7BR,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACQ,MAA5B,CAF6B,CAApB,CADQ;AAKnBX,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACQ,MADkB,EAE5BR,6BAAS,CAACE,OAFkB,CAApB,EAGPG,UARgB;AASnBqP,EAAAA,OAAO,EAAE1P,6BAAS,CAACO,IAAV,CAAeF,UATL;AAUnBie,EAAAA,OAAO,EAAEte,6BAAS,CAACO;AAVA,CAArB;AAaA8d,QAAQ,CAAC5d,YAAT,GAAwB;AACtBX,EAAAA,SAAS,EAAE,EADW;AAEtBwe,EAAAA,OAAO,EAAE;AAFa,CAAxB;AAae,SAASI,WAAT,QAAiD;AAAA,MAA1BC,WAA0B,SAA1BA,WAA0B;AAAA,MAAbC,SAAa,SAAbA,SAAa;;AAC9D,kBAAgChP,cAAQ,CAAC,KAAD,CAAxC;AAAA;AAAA,MAAOiP,QAAP;AAAA,MAAiBC,WAAjB;;AAEA,sBACExf;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAuC,IAAA,KAAK,EAAE;AAAEyd,MAAAA,OAAO,EAAE;AAAX;AAA9C,KACG4B,WAAW,CAAC;AAAA,WAAMG,WAAW,CAAC,CAACD,QAAF,CAAjB;AAAA,GAAD,CADd,EAEGA,QAAQ,IAAID,SAAS,CAAC;AAAA,WAAME,WAAW,CAAC,KAAD,CAAjB;AAAA,GAAD,CAFxB,CADF;AAMD;AAEDJ,WAAW,CAAC3e,SAAZ,GAAwB;AACtB4e,EAAAA,WAAW,EAAE3e,6BAAS,CAACO,IAAV,CAAeF,UADN;AAEtBue,EAAAA,SAAS,EAAE5e,6BAAS,CAACO,IAAV,CAAeF;AAFJ,CAAxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}